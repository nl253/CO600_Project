{"version":3,"sources":["authenticated.js"],"names":["logOut","fetch","redirect","cache","credentials","headers","response","sessionStorage","clear","status","json","console","error","getItem","then","location","pathname","catch","err","alert","document","querySelector","onclick","menu","classList","contains","remove","add","getElementById","event","preventDefault","btn","querySelectorAll","getAttribute","match","el"],"mappings":"0YAAA;;;;WAKeA,CAAAA,M,iIAAf,2HAE6BC,KAAK,CAAC,kBAAD,CAAqB,CAC/CC,QAAQ,CAAE,QADqC,CAE/CC,KAAK,CAAE,UAFwC,CAG/CC,WAAW,CAAE,SAHkC,CAI/CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,OAAU,kBAFH,CAJsC,CAArB,CAFlC,WAEYC,CAFZ,QAWMC,cAAc,CAACC,KAAf,EAXN,GAY6B,GAAnB,EAAAF,CAAQ,CAACG,MAZnB,mCAYmDH,CAAQ,CAACI,IAAT,EAZnD,gGAcMC,OAAO,CAACC,KAAR,MAdN,uD,iCAkB2C,IAAvC,GAAAL,cAAc,CAACM,OAAf,CAAuB,UAAvB,C,EACFb,MAAM,GAAGc,IAAT,CAAc,iBAAMC,CAAAA,QAAQ,CAACC,QAAT,CAAoB,GAA1B,CAAd,EAA6CC,KAA7C,CAAmD,SAAAC,CAAG,QAAIC,CAAAA,KAAK,CAACD,CAAD,CAAT,CAAtD,C,CAGFE,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDC,OAAhD,CAA0D,UAAM,CAC9D,GAAMC,CAAAA,CAAI,CAAGH,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAb,CAEA,MAAOE,CAAAA,CAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,WAAxB,EACHF,CAAI,CAACC,SAAL,CAAeE,MAAf,CAAuB,WAAvB,CADG,CAEHH,CAAI,CAACC,SAAL,CAAeG,GAAf,CAAmB,WAAnB,CACL,C,CAEDP,QAAQ,CAACQ,cAAT,CAAwB,yBAAxB,EAAmDN,OAAnD,sFAA6D,WAAOO,CAAP,uFAC3DA,CAAAA,CAAK,CAACC,cAAN,EAD2D,mBAGnD9B,MAAM,EAH6C,0DAKzDW,OAAO,CAACC,KAAR,MALyD,QAO3DG,QAAQ,CAACC,QAAT,CAAoB,GAPuC,sDAA7D,uD,CAUC,UAAW,4BACV,UAAWe,CAAX,GAAkBX,QAAQ,CAACY,gBAAT,CAA0B,2BAA1B,CAAlB,gDACE,GADSD,CACT,SAAIhB,QAAQ,CAACC,QAAT,GAAsBe,CAAG,CAACE,YAAJ,CAAiB,MAAjB,CAA1B,CAAoD,CAClDF,CAAG,CAACP,SAAJ,CAAcG,GAAd,CAAkB,0BAAlB,CADkD,CAElDI,CAAG,CAACP,SAAJ,CAAcG,GAAd,CAAkB,gBAAlB,CAFkD,CAGlD,KACD,CANO,mFAQV,GAAIZ,QAAQ,CAACC,QAAT,CAAkBkB,KAAlB,CAAwB,SAAxB,CAAJ,CAAwC,CACtC,GAAMC,CAAAA,CAAE,CAAGf,QAAQ,CAACC,aAAT,CAAuB,0DAAvB,EAAmFA,aAAnF,CAAiG,cAAjG,CAAX,CACAc,CAAE,CAACX,SAAH,CAAaG,GAAb,CAAiB,0BAAjB,CAFsC,CAGtCQ,CAAE,CAACX,SAAH,CAAaG,GAAb,CAAiB,gBAAjB,CACD,CACF,CAbD,E","sourcesContent":["/**\r\n * Logs the user out by sending a logout request.\r\n *\r\n * @returns {Promise<void>}\r\n */\r\nasync function logOut() {\r\n    try {\r\n      const response = await fetch('/api/user/logout', {\r\n        redirect: 'follow',\r\n        cache: 'no-cache',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n        },\r\n      });\r\n      sessionStorage.clear();\r\n      if (response.status >= 400) throw new (await response.json());\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n}\r\n\r\nif (sessionStorage.getItem('loggedIn') === null) {\r\n  logOut().then(ok => location.pathname = '/').catch(err => alert(err));\r\n}\r\n\r\ndocument.querySelector(\".navbar-burger.burger\").onclick = () => {\r\n  const menu = document.querySelector('.navbar-menu');\r\n\r\n  return menu.classList.contains('is-active')\r\n    ? menu.classList.remove( 'is-active')\r\n    : menu.classList.add('is-active');\r\n};\r\n\r\ndocument.getElementById('navbar-auth-btn-log-out').onclick = async (event) => {\r\n  event.preventDefault();\r\n  try {\r\n    await logOut()\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  location.pathname = '/';\r\n};\r\n\r\n(function() {\r\n  for (const btn of document.querySelectorAll('nav:first-of-type a[href]')) {\r\n    if (location.pathname === btn.getAttribute('href')) {\r\n      btn.classList.add('has-background-grey-dark');\r\n      btn.classList.add('has-text-white');\r\n      break;\r\n    }\r\n  }\r\n  if (location.pathname.match('/search')) {\r\n    const el = document.querySelector(\"nav:first-of-type .navbar-item.has-dropdown.is-hoverable\").querySelector('.navbar-link');\r\n    el.classList.add('has-background-grey-dark');\r\n    el.classList.add('has-text-white');\r\n  }\r\n})();\r\n\r\n"]}