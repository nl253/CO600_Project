{"version":3,"sources":["notAuthenticated.js"],"names":["location","pathname","includes","btn","document","getElementById","remove","onclick","event","preventDefault","email","value","password","fetch","method","redirect","cache","mode","credentials","headers","body","JSON","stringify","logInRes","status","json","err","msg","message","toString","console","error","alert","sessionStorage","clear","dispatchEvent","Event","setItem","result","setCookie","token","href","burger","querySelector","menu","classList","contains","add"],"mappings":"0YAAA,GAAIA,QAAQ,CAACC,QAAT,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,CAAkD,CAChD,GAAMC,CAAAA,GAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,8BAAxB,CAAZ,CACIF,GAF4C,EAEvCA,GAAG,CAACG,MAAJ,EACV,CAGD,CAAC,UAAW,CACV,GAAIH,CAAAA,CAAG,CAAGC,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAV,CACKF,CAFK,GAGVA,CAAG,CAACI,OAAJ,sFAAc,WAAOC,CAAP,uGAGZA,CAAAA,CAAK,CAACC,cAAN,EAHY,CAKNC,CALM,CAKEN,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CM,KALhD,CAMNC,CANM,CAMKR,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,EAAiDM,KANtD,UAOWE,KAAK,mBAAoB,CAC9CC,MAAM,CAAE,MADsC,CAE9CC,QAAQ,CAAE,QAFoC,CAG9CC,KAAK,CAAE,UAHuC,CAI9CC,IAAI,CAAE,MAJwC,CAK9CC,WAAW,CAAE,SALiC,CAM9CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,OAAU,kBAFH,CANqC,CAU9CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACZ,KAAK,CAALA,CAAD,CAAQE,QAAQ,CAARA,CAAR,CAAf,CAVwC,CAApB,CAPhB,WAONW,CAPM,UAoBW,GAAnB,EAAAA,CAAQ,CAACC,MApBD,mCAqBQD,CAAQ,CAACE,IAAT,EArBR,cAqBJC,CAAAA,CArBI,QAsBJC,CAtBI,CAsBED,CAAG,CAACC,GAAJ,EAAWD,CAAG,CAACE,OAAf,EAA0BF,CAAG,CAACG,QAAJ,EAtB5B,CAuBVC,OAAO,CAACC,KAAR,CAAcJ,CAAd,CAvBU,mBAwBHK,KAAK,CAACL,CAAD,CAxBF,qCA8BGJ,CAAQ,CAACE,IAAT,EA9BH,SA8BVA,CA9BU,qEAgCVK,OAAO,CAACC,KAAR,MAhCU,CAiCVE,cAAc,CAACC,KAAf,EAjCU,mBAkCH9B,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6C8B,aAA7C,CAA2D,GAAIC,CAAAA,KAAJ,CAAU,OAAV,CAA3D,CAlCG,UAqCZH,cAAc,CAACI,OAAf,CAAuB,UAAvB,CAAmChB,IAAI,CAACC,SAAL,CAAeG,CAAI,CAACa,MAApB,CAAnC,CArCY,CAsCZC,SAAS,CAAC,OAAD,CAAUd,CAAI,CAACa,MAAL,CAAYE,KAAtB,CAtCG,CAuCZxC,QAAQ,CAACyC,IAAT,CAAgBzC,QAAQ,CAACC,QAAT,CAAkBC,QAAlB,CAA2B,WAA3B,EACZ,YADY,CAEZF,QAAQ,CAACyC,IAzCD,wDAAd,uDAHU,CA8CX,CA9CD,G,CAgDC,UAAW,CACV,GAAIC,CAAAA,CAAM,CAAGtC,QAAQ,CAACuC,aAAT,CAAuB,uBAAvB,CAAb,CACKD,CAFK,GAGVA,CAAM,CAACnC,OAAP,CAAiB,UAAM,CACrB,GAAMqC,CAAAA,CAAI,CAAGxC,QAAQ,CAACuC,aAAT,CAAuB,cAAvB,CAAb,CAEA,MAAOC,CAAAA,CAAI,CAACC,SAAL,CAAeC,QAAf,CAAwB,WAAxB,EACHF,CAAI,CAACC,SAAL,CAAevC,MAAf,CAAuB,WAAvB,CADG,CAEHsC,CAAI,CAACC,SAAL,CAAeE,GAAf,CAAmB,WAAnB,CACL,CATS,CAUX,CAVD,E","sourcesContent":["if (location.pathname.includes('/user/register')) {\n  const btn = document.getElementById('layout-btn-register-redirect');\n  if (btn) btn.remove();\n}\n\n\n(function() {\n  let btn = document.getElementById('layout-btn-log-in');\n  if (!btn) return;\n  btn.onclick = async (event) => {\n\n    // don't send the HTML form\n    event.preventDefault();\n\n    const email = document.getElementById('layout-input-email').value;\n    const password = document.getElementById('layout-input-password').value;\n    const logInRes = await fetch(`/api/user/login`, {\n      method: 'POST',\n      redirect: 'follow',\n      cache: 'no-cache',\n      mode: 'cors',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json',\n      },\n      body: JSON.stringify({email, password}),\n    });\n\n    if (logInRes.status >= 400) {\n      const err = await logInRes.json();\n      const msg = err.msg || err.message || err.toString();\n      console.error(msg);\n      return alert(msg);\n    }\n\n    let json;\n\n    try {\n      json = await logInRes.json();\n    } catch (e) {\n      console.error(e);\n      sessionStorage.clear();\n      return document.getElementById('layout-btn-log-in').dispatchEvent(new Event('click'));\n    }\n\n    sessionStorage.setItem('loggedIn', JSON.stringify(json.result));\n    setCookie('token', json.result.token);\n    location.href = location.pathname.includes('/register')\n      ? '/user/home'\n      : location.href;\n  };\n})();\n\n(function() {\n  let burger = document.querySelector(\".navbar-burger.burger\");\n  if (!burger) return;\n  burger.onclick = () => {\n    const menu = document.querySelector('.navbar-menu');\n\n    return menu.classList.contains('is-active')\n      ? menu.classList.remove( 'is-active')\n      : menu.classList.add('is-active');\n  };\n})();\n\n"]}