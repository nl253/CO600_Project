"use strict";function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}/**
 * Select (highlight) a list item.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @param {!Number} id
 */function select(a,b){return document.querySelector("#module-edit-list-".concat(a.toLowerCase()," li[data-id='").concat(b,"']")).classList.add("has-background-light")}/**
 * Un-Select (un-highlights) a list item.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 */function unSelect(a){var b=document.querySelector("#module-edit-list-".concat(a.toLowerCase()," li[class*=has-background-light]"));b&&b.classList.remove("has-background-light")}/**
 * Saves the last click. (this is recalled later)
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @param {!Number} id
 */function saveClick(a,b){return sessionStorage.setItem("".concat(location.pathname,"?click"),JSON.stringify({page:a.toLowerCase(),id:b}))}/**
 * Clears a list.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 */function clearList(a){return document.getElementById("module-edit-list-".concat(a.toLowerCase())).innerHTML=""}/**
 * Clears the edit pane.
 */function clearPane(){return document.getElementById("module-edit-pane").innerHTML=""}/**
 * Gets the id of selected.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @return {?Number}
 */function getSelId(what){var maybe=document.querySelector("#module-edit-list-".concat(what.toLowerCase()," li[class*=has-background-light]"));return maybe?eval(maybe.getAttribute("data-id")):null}/**
 * Shows the lesson edit pane.
 *
 * @param {!{id: !Number, name: ?String, authorId: !Number, topic: ?String, summary: ?String}} module
 * @param {!Array<!String>} topics
 * @return {Promise<void>}
 */function showModEditPane(){return _showModEditPane.apply(this,arguments)}/**
 * Shows the lesson edit pane.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String, content: ?Boolean, summary: ?String}} lesson
 * @param {Array<{id: ?Number, name: !String}>} attachments
 */function _showModEditPane(){return _showModEditPane=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=1<d.length&&void 0!==d[1]?d[1]:["AI","Anthropology","Archeology","Architecture","Arts","Biology","Chemistry","Computer Science","Design","Drama","Economics","Engineering","Geography","History","Humanities","Languages","Law","Linguistics","Literature","Mathematics","Medicine","Philosophy","Physics","Political Science","Psychology","Sciences","Social Sciences","Sociology","Theology"],a.prev=1,a.t1="\n      <div class=\"animate-ease-in\">\n        <h2 class=\"title\" style=\"margin-bottom: 10px;\">\n          Name\n        </h2>\n        \n        <div id=\"module-edit-name\" \n             contenteditable=\"true\" \n             style=\"border-radius: 18px; border: none; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; font-size: 1.2rem;\" class=\"has-background-light\">\n          ".concat(b.name?b.name:"","\n        </div>\n        <h3 class=\"subtitle\" style=\"margin: 25px 0 0 0;\">\n          Topic\n        </h3>\n        <div class=\"dropdown\" \n             onmouseover=\"this.classList.add('is-active')\"\n             onmouseout=\"this.classList.remove('is-active')\">\n          <div class=\"dropdown-trigger\">\n            <button class=\"button has-background-light\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu\" style=\"border: none;\">\n              <span id=\"module-edit-topic\" style=\"min-width: 150px;\">").concat(b.topic?b.topic:"","</span>\n              <span class=\"icon is-small\">\n                <i class=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n              </span>\n            </button>\n          </div>\n          <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\" style=\"margin-bottom: 30px;\">\n            <div class=\"dropdown-content\">\n              ").concat(c.map(function(a){return"<a class='dropdown-item' onclick='document.getElementById(\"module-edit-topic\").innerText = this.innerText.trim()'>"+a+"</a>"}),"\n              <hr class=\"dropdown-divider\">\n              <span class=\"dropdown-item\" style=\"font-weight: bold;\">\n                Other\n              </span>\n              <a class=\"dropdown-item\" \n                 onmouseout=\"document.getElementById('module-edit-topic').innerText = this.innerText.trim()\" \n                 id=\"module-edit-topic-other\" \n                 contenteditable=\"true\"\n                 style=\"margin: 5px 10px; max-width: 90%;\">\n                ").concat(b.topic?b.topic:"","\n              </a>\n            </div>\n          </div>\n        </div>\n        <section class=\"content\" style=\"margin-top: 40px;\">\n          <strong>Author</strong>   \n          <a href=\"/user/").concat(b.authorId,"\">\n            "),a.next=5,get("User",{id:b.authorId}).then(function(a){return a[0].email});case 5:return a.t2=a.sent,a.t0=a.t1.concat.call(a.t1,a.t2,"\n          </a>\n          <br>\n          <strong>Rating</strong> <span id=\"module-edit-rating\">"),a.next=9,get("Rating",{moduleId:b.id}).then(function(a){return a.map(function(a){return a.stars})}).then(function(a){var b=a.length;return 0<b?a.reduce(function(a,b){return a+b})/b:0});case 9:a.t3=a.sent,a.t4=b.summary?b.summary:"",a.t5=b.id,document.getElementById("module-edit-pane").innerHTML=a.t0.concat.call(a.t0,a.t3,"/5</span>\n        </section>\n        <section class=\"is-medium\" style=\"margin-bottom: 30px;\">\n          <h2 class=\"title is-medium\" style=\"margin-bottom: 10px;\">Summary</h2>\n          <textarea id=\"module-edit-summary\"\n                    style=\"word-wrap: break-word;\">").concat(a.t4,"</textarea>\n        </section>\n        <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button type=\"reset\" onclick=\"alert('Not Implemented Yet.')\" class=\"button is-warning is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Reset</span>\n            </button>\n          </div>\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button type=\"submit\" onclick=\"updateMod()\" class=\"button is-success is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Save</span>\n            </button>\n          </div>\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button onclick=\"if (confirm('Delete module?')) destroyMod(").concat(a.t5,")\" class=\"button is-danger is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Delete</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    "),a.next=19;break;case 15:return a.prev=15,a.t6=a["catch"](1),console.error(a.t6),a.abrupt("return",alert(a.t6.msg||a.t6.message||a.t6.toString()));case 19:case"end":return a.stop();}},a,this,[[1,15]])})),_showModEditPane.apply(this,arguments)}function showLessEditPane(){return _showLessEditPane.apply(this,arguments)}/**
 * Shows the question edit pane.
 *
 * @param {{id: !Number, moduleId: !Number, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question
 */function _showLessEditPane(){return _showLessEditPane=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=1<d.length&&void 0!==d[1]?d[1]:[],document.getElementById("module-edit-pane").innerHTML="\n    <form enctype=\"multipart/form-data\"\n          id=\"module-edit-form-lesson\"\n          disabled=\"true\"\n          class=\"lesson-edit-form column is-10-desktop is-full-tablet is-full-mobile animate-ease-in\"\n          style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: -15px;\">\n      <h2 class=\"title is-3\">Name</h2>\n      <input name=\"name\" value=\"".concat(b.name?b.name:"","\" \n             class=\"has-background-light\"\n             autocomplete=\"on\" placeholder=\"e.g. Introduction to AI\"\n             style=\"padding: 5px 10px; border: none; border-radius: 18px; font-size: 1.2rem;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Summary</h2>\n      <textarea name=\"summary\" autocomplete=\"on\"\n                class=\"has-background-light\"\n                style=\"padding: 5px; min-height: 50px; max-height: 400px; border: none; border-radius: 18px;\">").concat(b.summary?b.summary:"","</textarea>\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Content</h2>\n      <p style=\"margin-bottom: 10px;\">Upload HTML file with the lesson content</p>\n      <div id=\"module-edit-lesson-content\"></div>\n      <input type=\"file\" name=\"lesson\" class=\"is-paddingless\" style=\"margin-top: 20px;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Attachments (optional)</h2>\n      <p><strong>Select a file:</strong></p>\n      <br>\n      <ul style=\"list-style-type: disc; display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-left: 19px;\">\n        <li>Image (.jpg, .jpeg, .png, .gif)</li>\n        <li>Audio (.mp3)</li>\n        <li>Video (.mp4, .mpg)</li>\n      </ul>\n      <br>\n      <input type=\"file\" name=\"attachments\" class=\"is-paddingless\" multiple style=\"display: block\">\n      <div style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: 20px; width: 100%;\">\n        <h3 id=\"lesson-edit-h-uploaded-files title is-5\" style=\"margin-bottom: 8px;\">\n          Uploaded Files\n        </h3>\n        <ul id=\"module-edit-list-attachments\" style=\"display: flex; flex-direction: column; justify-content: flex-start; align-items: flex-start; width: 100%;\"></ul>\n      </div>\n      <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"alert('Not Implemented Yet.')\" type=\"reset\" class=\"button is-block is-warning\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Reset</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"event.preventDefault(); updateLess()\" class=\"button is-block is-success\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Save</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"event.preventDefault(); if (confirm('Delete lesson?')) destroyLess(").concat(b.id,")\" class=\"button is-block is-danger\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Delete</span>\n          </button>\n        </div>\n      </div>\n    </form>\n    "),b.content?setLessContent():unsetLessContent(),a.next=5,Promise.all(c.map(function(a){return appendAttachment({id:a.id,lessonId:b.id,name:a.name})}));case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop();}},a,this)})),_showLessEditPane.apply(this,arguments)}function showQuestEditPane(a){document.getElementById("module-edit-pane").innerHTML="\n    <div class=\"animate-ease-in\">\n      <h1 class=\"title is-3\" style=\"margin-bottom: 10px;\">Question</h1>\n      <p><strong>Note:</strong> Save the current question before editing another one</p>\n      <br>\n      <a id=\"module-edit-question-name\" class=\"button is-light has-background-light is-block has-text-left\" contenteditable=\"true\" style=\"padding: 3px 15px\">\n        ".concat(a.name?a.name:"","\n      </a>\n      <br>\n\n      <h2 class=\"title is-3\" style=\"margin-bottom: 10px;\">Correct Answer</h2>\n      <a id=\"module-edit-question-answer\" class=\"button is-light is-block has-text-left\" contenteditable=\"true\" style=\"padding: 3px 15px;\">\n        ").concat(a.correctAnswer?a.correctAnswer:"","\n      </a>\n      \n      <h3 class=\"title is-3\" style=\"margin: 30px 0 10px 0;\">Other Answers</h3>\n\n      <p><strong>Note:</strong> Include other answers which are wrong</p>\n\n      <br>\n\n      <a id=\"module-edit-question-bad-answer-1\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ").concat(a.badAnswer1?a.badAnswer1:"","\n      </a>\n\n      <a id=\"module-edit-question-bad-answer-2\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ").concat(a.badAnswer2?a.badAnswer2:"","\n      </a>\n      \n      <a id=\"module-edit-question-bad-answer-3\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ").concat(a.badAnswer3?a.badAnswer3:"","\n      </a>\n      \n      <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button type=\"reset\" onclick=\"alert('Not Implemented Yet.')\" class=\"button is-block is-warning\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Reset</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button type=\"submit\" onclick=\"updateQuest()\" class=\"button is-block is-success\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Save</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"if (confirm('Delete question?')) destroyQuest(").concat(a.id,")\" class=\"button is-block is-danger\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Delete</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  ")}/**
 * Memorize the changes made to the input (or contenteditable) fields.
 */function saveProgress(){var a=document.getElementById("module-edit-pane"),b=getSelId("Module"),c=getSelId("Lesson"),d=getSelId("Question");if(b&&c&&!d);else{if(b&&!c&&d){if(!a.querySelector("#module-edit-question-answer"))return;var e=JSON.stringify([{authorId:JSON.parse(sessionStorage.getItem("loggedIn")).id,badAnswer1:a.querySelector("#module-edit-question-bad-answer-1").innerText.trim(),badAnswer2:a.querySelector("#module-edit-question-bad-answer-2").innerText.trim(),badAnswer3:a.querySelector("#module-edit-question-bad-answer-3").innerText.trim(),correctAnswer:a.querySelector("#module-edit-question-answer").innerText.trim(),name:a.querySelector("#module-edit-question-name").innerText.trim()}]);return sessionStorage.setItem("".concat(location.pathname,"/questions?id=").concat(d),e),sessionStorage.setItem("".concat(location.pathname,"/questions?id=").concat(d,"&moduleId=").concat(b),e)}if(b&&!c&&!d)return a.querySelector("#module-edit-name")?sessionStorage.setItem("".concat(location.pathname,"/modules?id=").concat(b),JSON.stringify([{name:a.querySelector("#module-edit-name").innerText.trim(),topic:a.querySelector("#module-edit-topic").innerText.trim(),authorId:JSON.parse(sessionStorage.getItem("loggedIn")).id,summary:a.querySelector("#module-edit-summary").value.trim()}])):void 0}}/**
 * Toggle module. Run when a module is pressed. Shows the module-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function toggleModule(){return _toggleModule.apply(this,arguments)}/**
 * Toggle module. Run when a module is pressed. Shows the module-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function _toggleModule(){return _toggleModule=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d,e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(document.querySelector("#module-edit-list-module > li[data-id='".concat(b,"']"))){a.next=2;break}return a.abrupt("return");case 2:if(saveClick("Module",b),saveProgress(),c=getSelId("Module"),c!==b||getSelId("Lesson")||getSelId("Question")){a.next=7;break}return a.abrupt("return");case 7:if(document.querySelectorAll("#module-edit-list-module > li[data-id]").forEach(function(a){return a.setAttribute("disabled","true")}),document.getElementById("module-edit-pane").innerHTML="\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>",unSelect("Lesson"),unSelect("Question"),c===b){a.next=26;break}return unSelect("Module"),select("Module",b),clearList("Lesson"),clearList("Question"),document.getElementById("module-edit-spinner-list-lesson").classList.remove("is-invisible"),document.getElementById("module-edit-spinner-list-question").classList.remove("is-invisible"),d=get("Lesson",{moduleId:b}).then(function(a){return Promise.all(a.map(function(a){return appendLesson(a)}))}),e=get("Question",{moduleId:b}).then(function(a){return Promise.all(a.map(function(a){return appendQuestion(a)}))}),a.next=22,d;case 22:return a.next=24,e;case 24:document.getElementById("module-edit-spinner-list-lesson").classList.add("is-invisible"),document.getElementById("module-edit-spinner-list-question").classList.add("is-invisible");case 26:return document.querySelectorAll("#module-edit-list-module > li").forEach(function(a){return a.removeAttribute("disabled")}),a.t0=showModEditPane,a.next=30,get("Module",{id:b}).then(function(a){return a[0]});case 30:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 32:case"end":return a.stop();}},a,this)})),_toggleModule.apply(this,arguments)}function toggleLesson(){return _toggleLesson.apply(this,arguments)}/**
 * Toggle question. Run when a question is pressed. Shows the question-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function _toggleLesson(){return _toggleLesson=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(document.querySelector("#module-edit-list-lesson > li[data-id='".concat(b,"']"))){a.next=2;break}return a.abrupt("return");case 2:if(c=getSelId("Lesson"),b!==c){a.next=5;break}return a.abrupt("return");case 5:return document.querySelectorAll("#module-edit-list-lesson > li[data-id]").forEach(function(a){return a.setAttribute("disabled","true")}),document.getElementById("module-edit-pane").innerHTML="\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>",saveClick("Lesson",b),saveProgress(),unSelect(null===c?"Question":"Lesson"),select("Lesson",b),a.next=13,get("Lesson",{id:b,moduleId:getSelId("Module")});case 13:return d=a.sent[0],document.querySelectorAll("#module-edit-list-lesson > li[data-id]").forEach(function(a){return a.removeAttribute("disabled")}),a.t0=showLessEditPane,a.t1=d,a.next=19,get("File",{lessonId:d.id});case 19:return a.t2=a.sent,a.next=22,(0,a.t0)(a.t1,a.t2);case 22:return a.abrupt("return",a.sent);case 23:case"end":return a.stop();}},a,this)})),_toggleLesson.apply(this,arguments)}function toggleQuestion(){return _toggleQuestion.apply(this,arguments)}/**
 * Appends a new module to module list (left-most list).
 *
 * @param {{id: !Number, authorId: !Number, name: ?String}} module
 */function _toggleQuestion(){return _toggleQuestion=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(document.querySelector("#module-edit-list-question > li[data-id='".concat(b,"']"))){a.next=2;break}return a.abrupt("return");case 2:if(b!==getSelId("Question")){a.next=4;break}return a.abrupt("return");case 4:return document.querySelectorAll("#module-edit-list-question > li[data-id]").forEach(function(a){return a.setAttribute("disabled","true")}),document.getElementById("module-edit-pane").innerHTML="\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>",saveClick("Question",b),saveProgress(),unSelect("Question"),unSelect("Lesson"),select("Question",b),document.querySelectorAll("#module-edit-list-question > li[data-id]").forEach(function(a){return a.removeAttribute("disabled")}),a.t0=showQuestEditPane,a.next=15,get("Question",{id:b,moduleId:getSelId("Module")});case 15:return a.t1=a.sent[0],a.next=18,(0,a.t0)(a.t1);case 18:return a.abrupt("return",a.sent);case 19:case"end":return a.stop();}},a,this)})),_toggleQuestion.apply(this,arguments)}function appendModule(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{id:null,name:null},b=document.createElement("li");return b.setAttribute("data-id",a.id),b.innerHTML="\n    <a onclick=\"toggleModule(".concat(a.id,")\" style=\"min-width: 100px; padding: 10px; margin-right: 5px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>").concat(a.name?a.name:"unnamed #"+a.id.toString(),"</span>\n      <button class=\"button is-danger is-small\" style=\"width: 20px; height: 23px;\" onclick=\"if (confirm('Delete module?')) destroyMod(").concat(a.id,");\">\n        <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n      </button>\n    </a>"),document.getElementById("module-edit-list-module").appendChild(b)}/**
 * Appends a lesson to the list of lessons AND created a form for editing it.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String}} lesson
 */function appendLesson(a){// append to the second (lesson) menu
var b=document.createElement("li");return b.setAttribute("data-module-id",a.moduleId),b.setAttribute("data-id",a.id),b.innerHTML="\n    <a onclick=\"toggleLesson(".concat(a.id,")\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>").concat(a.name?a.name:"unnamed #"+a.id,"</span>\n      <div style=\"display: flex; flex-direction: row; justify-content: space-between;\">\n        <button class=\"button is-small is-danger\" onclick=\"if (confirm('Delete lesson?')) destroyLess(").concat(a.id,");\" style=\"width: 20px; height: 23px;\">\n          <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n        </button>\n      </div>\n    </a>"),document.getElementById("module-edit-list-lesson").appendChild(b)}/**
 * Appends a question to the quiz for the selected module.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question
 */function appendQuestion(a){var b=document.createElement("li");return b.setAttribute("data-id",a.id),b.setAttribute("data-module-id",a.moduleId),b.innerHTML="\n    <a class=\"has-text-dark\" onclick=\"toggleQuestion(".concat(a.id,")\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>").concat(a.name?a.name:"unnamed #"+a.id,"</span>\n      <div style=\"display: flex; flex-direction: row; justify-content: space-between;\">\n        <button class=\"button is-small is-danger\" onclick=\"if (confirm('Delete question?')) destroyQuest(").concat(a.id,");\" style=\"width: 20px; height: 23px;\">\n          <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n        </button>\n      </div>\n    </a>\n  "),document.querySelector("#module-edit-list-question").appendChild(b)}/**
 * Adds attachment to a list of attachments in a lesson.
 *
 * @param {!{id: ?Number, lessonId: !Number, name: !String}} file
 * @return {void}
 */function appendAttachment(){return _appendAttachment.apply(this,arguments)}function _appendAttachment(){return _appendAttachment=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,void 0!==b.id){a.next=5;break}return a.next=4,get("File",{lessonId:b.lessonId,name:b.name}).then(function(a){return a[0].id});case 4:b.id=a.sent;case 5:c=document.getElementById("module-edit-list-attachments"),c.innerHTML+="\n    <li class=\"has-text-black has-background-light\"\n        data-name=\"".concat(b.name,"\"\n        data-id=\"").concat(b.id,"\"\n        style=\"padding: 10px; margin-bottom: 10px; width: 100%;\">\n      <p style=\"margin-bottom: auto; margin-top: auto; float: left; position: relative; top: 4px;\">").concat(b.name,"</p>\n      <div style=\"margin-bottom: auto; margin-top: auto; float: right;\">\n        <a href=\"/file/").concat(b.id,"\" class=\"button is-link is-small has-text-white\" download=\"").concat(b.name,"\" style=\"\">\n          Download\n          <!--<i class=\"fas fa-download is-block\"></i>-->\n        </a>\n        <a onclick=\"destroyAttach(").concat(b.id,", ").concat(b.lessonId,")\" class=\"button is-small is-danger\" style=\"\">\n          Delete\n          <!--<i class=\"fas fa-times is-block\"></i>-->\n        </a>\n      </div>\n    </li>\n      "),a.next=13;break;case 9:return a.prev=9,a.t0=a["catch"](0),console.error(a.t0),a.abrupt("return",alert(a.t0.message||a.t0.toString()));case 13:case"end":return a.stop();}},a,this,[[0,9]])})),_appendAttachment.apply(this,arguments)}function setLessContent(){var a=getSelId("Lesson");document.querySelector("form #module-edit-lesson-content").innerHTML="\n    <p class=\"lesson-edit-msg-has-lesson\">\n      <br>\n      <strong>NOTE</strong>\n      <br>\n      You have already uploaded lesson content!\n      <br>\n      Feel free to <strong>replace</strong> it by re-uploading another file.\n    </p>\n    <br>\n    <a href=\"/api/lesson/".concat(a,"/download\"\n       class=\"button is-link is-small has-text-centered has-text-white\"\n       download=\"lesson.html\">\n      <i class=\"fas fa-download icon\"></i>\n      <span>Download</span>\n    </a>\n  ")}/**
 * Remove the HTML content file from a lesson.
 */function unsetLessContent(){document.querySelector("form #module-edit-lesson-content").innerHTML="\n    <ul style=\"display: flex; flex-direction: column; justify-content: space-around;\">\n      <li>\n        <p><em>Only</em> include the <em>content</em> of the <code>&lt;body&gt;</code> tag</p>\n      </li>\n      <li>\n        <p>We will only accept <strong>HTML</strong> files</p>\n      </li>\n    </ul>\n  "}/**
 * Modifies a module and updates UI.
 *
 * @return {Promise<void>}
 */function updateMod(){return _updateMod.apply(this,arguments)}/**
 * Modifies a lesson and updates UI.
 *
 * TODO ensure file names are unique.
 *
 * @return {Promise<void>}
 */function _updateMod(){return _updateMod=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c,d,e,f,g;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=document.getElementById("module-edit-pane"),c=b.querySelector("#module-edit-name").innerText,d=b.querySelector("#module-edit-topic").innerText,e=b.querySelector("#module-edit-summary").value,f=getSelId("Module"),a.prev=5,a.next=8,update("Module",f,JSON.stringify({summary:e?e:null,name:c?c:null,topic:d?d:null}));case 8:sessionStorage.removeItem("".concat(location.pathname,"/modules?authorId=").concat(JSON.parse(sessionStorage.getItem("loggedIn")).id)),sessionStorage.removeItem("".concat(location.pathname,"/modules?id=").concat(f)),a.next=17;break;case 12:return a.prev=12,a.t0=a["catch"](5),g=a.t0.msg||a.t0.message||a.t0.toString(),console.error(a.t0),a.abrupt("return",alert(g));case 17:return document.querySelector("#module-edit-list-module li[data-id='".concat(f,"'] > a > span")).innerText=c?c:"unnamed ".concat(f),a.abrupt("return",alert("Updated module."));case 19:case"end":return a.stop();}},a,this,[[5,12]])})),_updateMod.apply(this,arguments)}function updateLess(){return _updateLess.apply(this,arguments)}/**
 * TODO Modifies a question and updates UI.
 *
 * @return {Promise<void>}
 */function _updateLess(){return _updateLess=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c,d,e,g,h,i,j,k,l,m,n,o,p;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,b=document.querySelector("#module-edit-pane form"),c=getSelId("Lesson"),d=new FormData,e=b.querySelector("input[type=file]:not([multiple])"),g=0<e.files.length,!g){a.next=12;break}if(e.files[0].name.match(/\.x?html?$/i)){a.next=11;break}return a.abrupt("return",alert("Lesson must be an HTML file."));case 11:d.append("lesson",e.files[0],"lesson.html");case 12:h=b.querySelector("input[type=file][multiple]").files,i=!0,j=!1,k=void 0,a.prev=16,l=h[Symbol.iterator]();case 18:if(i=(m=l.next()).done){a.next=28;break}if(n=m.value,n.name.match(/\.((pn|jp)g|gif|mp[34g])$/i)){a.next=24;break}return a.abrupt("return",alert("Invalid attachment file type ".concat(n.name,".")));case 24:d.append(n.name,n);case 25:i=!0,a.next=18;break;case 28:a.next=34;break;case 30:a.prev=30,a.t0=a["catch"](16),j=!0,k=a.t0;case 34:a.prev=34,a.prev=35,i||null==l.return||l.return();case 37:if(a.prev=37,!j){a.next=40;break}throw k;case 40:return a.finish(37);case 41:return a.finish(34);case 42:return o=b.querySelector("input[name=name]").value.trim(),d.append("name",o),d.append("summary",b.querySelector("textarea[name=summary]").value.trim()),console.debug(_toConsumableArray(d.entries())),a.next=48,update("Lesson",c,d,null);case 48:return g&&setLessContent(c),a.next=51,Promise.all(Array.from(h).map(function(a){return appendAttachment({id:a.id,name:a.name,lessonId:c})}));case 51:return p=getSelId("Module"),sessionStorage.removeItem("".concat(location.pathname,"/lessons?id=").concat(c,"&moduleId=").concat(p)),sessionStorage.removeItem("".concat(location.pathname,"/lessons?id=").concat(c)),sessionStorage.removeItem("".concat(location.pathname,"/lessons?moduleId=").concat(p)),sessionStorage.removeItem("".concat(location.pathname,"/files?lessonId=").concat(c)),o=b.querySelector("input[name=name]").value.trim(),b.querySelector("input[type=file][multiple]").outerHTML="\n      <input type=\"file\" name=\"attachments\" class=\"is-paddingless\" multiple style=\"display: block\">\n    ",document.querySelector("#module-edit-list-lesson li[data-id='".concat(c,"'] > a > span")).innerText=o?o:"unnamed ".concat(c),a.abrupt("return",alert("Updated lesson."));case 62:return a.prev=62,a.t1=a["catch"](0),console.error(a.t1),a.abrupt("return",alert(a.t1.msg||a.t1.message||a.t1.toString()));case 66:case"end":return a.stop();}},a,this,[[0,62],[16,30,34,42],[35,,37,41]])})),_updateLess.apply(this,arguments)}function updateQuest(){return _updateQuest.apply(this,arguments)}/**
 * Destroys a module.
 *
 * @param {!Number} id
 * @return {void}
 */function _updateQuest(){return _updateQuest=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c,d,e,f,g,h,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=getSelId("Question"),c=getSelId("Module"),sessionStorage.removeItem("".concat(location.pathname,"/questions?moduleId=").concat(c)),sessionStorage.removeItem("".concat(location.pathname,"/questions?id=").concat(b,"&moduleId=").concat(c)),d=document.getElementById("module-edit-pane"),e=d.querySelector("#module-edit-question-name").innerText,f=d.querySelector("#module-edit-question-answer").innerText,g=d.querySelector("#module-edit-question-bad-answer-1").innerText,h=d.querySelector("#module-edit-question-bad-answer-2").innerText,i=d.querySelector("#module-edit-question-bad-answer-3").innerText,a.next=12,update("Question",b,JSON.stringify({id:b,moduleId:c,name:e?e:null,badAnswer1:g?g:null,badAnswer2:h?h:null,badAnswer3:i?i:null,correctAnswer:f?f:null}));case 12:return document.querySelector("#module-edit-list-question li[data-id='".concat(b,"'] > a > span")).innerText=e?e:"unnamed #".concat(b),a.abrupt("return",alert("Updated question."));case 14:case"end":return a.stop();}},a,this)})),_updateQuest.apply(this,arguments)}function destroyMod(a){return destroy("Module",a),sessionStorage.removeItem("".concat(location.pathname,"/modules?authorId=").concat(JSON.parse(sessionStorage.getItem("loggedIn")).id)),getSelId("Module")===a&&(clearPane(),clearList("Lesson"),clearList("Question")),document.querySelector("#module-edit-list-module li[data-id='".concat(a,"']")).remove()}/**
 * Destroys a lesson.
 *
 * @param {!Number} id
 * @return {Promise<void|!String>}
 */function destroyLess(a){var b=destroy("Lesson",a);return sessionStorage.removeItem("".concat(location.pathname,"/lessons?moduleId=").concat(getSelId("Module"))),getSelId("Lesson")===a&&clearPane(),document.querySelector("#module-edit-list-lesson li[data-id='".concat(a,"']")).remove(),b}/**
 * Destroys a question.
 *
 * @param {!Number} id
 * @return {void}
 */function destroyQuest(a){return destroy("Question",a),sessionStorage.removeItem("".concat(location.pathname,"/questions?moduleId=").concat(getSelId("Module"))),getSelId("Question")===a&&clearPane(),document.querySelector("#module-edit-list-question li[data-id='".concat(a,"']")).remove()}/**
 * Destroys an attachment (file).
 *
 * @param {{id: !Number, lessonId: !Number}} file
 * @return {Promise<void|!String>}
 */function destroyAttach(a,b){// clear cache
return sessionStorage.removeItem("".concat(location.pathname,"/files?lessonId=").concat(b)),document.querySelector("#module-edit-list-attachments li[data-id='".concat(a,"']")).remove(),destroy("File",a)}/**
 * Creates a module.
 *
 * @return {Promise<void>}
 */ /**
 * Creates a lesson.
 *
 * @return {Promise<void>}
 */ /**
 * Creates a question.
 *
 * @return {Promise<void>}
 */ /**
 * Populate the page using AJAX.
 *
 * Try to recall last click.
 */document.getElementById("module-edit-btn-module-create").onclick=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),c=JSON.parse(sessionStorage.getItem("loggedIn")).id,a.prev=2,d=create("Module",JSON.stringify({authorId:c})),sessionStorage.removeItem("".concat(location.pathname,"/modules?authorId=").concat(c)),a.t0=appendModule,a.next=8,d;case 8:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 12:a.prev=12,a.t2=a["catch"](2),console.error(a.t2),alert("Your session expired."),location.pathname="/";case 17:case"end":return a.stop();}},a,this,[[2,12]])}));return function(){return a.apply(this,arguments)}}(),document.getElementById("module-edit-btn-lesson-create").onclick=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.preventDefault(),c=getSelId("Module"),c){a.next=4;break}return a.abrupt("return",alert("Module must be selected."));case 4:return a.prev=4,d=create("Lesson",JSON.stringify({moduleId:c})),sessionStorage.removeItem("".concat(location.pathname,"/lessons?moduleId=").concat(c)),a.t0=appendLesson,a.next=10,d;case 10:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 14:a.prev=14,a.t2=a["catch"](4),console.error(a.t2),alert("Your session expired."),location.pathname="/";case 19:case"end":return a.stop();}},a,this,[[4,14]])}));return function(){return a.apply(this,arguments)}}(),document.getElementById("module-edit-btn-question-create").onclick=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.preventDefault(),c=getSelId("Module"),c){a.next=4;break}return a.abrupt("return",alert("Module must be selected."));case 4:return a.prev=4,d=create("Question",JSON.stringify({moduleId:c})),sessionStorage.removeItem("".concat(location.pathname,"/questions?moduleId=").concat(c)),a.t0=appendQuestion,a.next=10,d;case 10:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 14:a.prev=14,a.t2=a["catch"](4),console.error(a.t2),alert("Your session expired."),location.pathname="/";case 19:case"end":return a.stop();}},a,this,[[4,14]])}));return function(){return a.apply(this,arguments)}}(),_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,document.getElementById("module-edit-spinner-list-module").classList.remove("is-invisible"),b=sessionStorage.getItem("loggedIn"),b){a.next=5;break}return a.abrupt("return",logOut());case 5:return a.next=7,get("Module",{authorId:JSON.parse(b).id}).then(function(a){return Promise.all(a.map(function(a){return appendModule(a)}))});case 7:return document.getElementById("module-edit-spinner-list-module").classList.add("is-invisible"),a.abrupt("return");case 11:return a.prev=11,a.t0=a["catch"](0),document.getElementById("module-edit-spinner-list-module").classList.add("is-invisible"),c=a.t0.msg||a.t0.message||a.t0.toString(),console.error(a.t0),a.abrupt("return",alert(c));case 17:case"end":return a.stop();}},a,this,[[0,11]])}))();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVkaXQuanMiXSwibmFtZXMiOlsic2VsZWN0Iiwid2hhdCIsImlkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidG9Mb3dlckNhc2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1blNlbGVjdCIsIm1heWJlIiwicmVtb3ZlIiwic2F2ZUNsaWNrIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwibG9jYXRpb24iLCJwYXRobmFtZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYWdlIiwiY2xlYXJMaXN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJjbGVhclBhbmUiLCJnZXRTZWxJZCIsImV2YWwiLCJnZXRBdHRyaWJ1dGUiLCJzaG93TW9kRWRpdFBhbmUiLCJtb2R1bGUiLCJ0b3BpY3MiLCJuYW1lIiwidG9waWMiLCJtYXAiLCJ0IiwiYXV0aG9ySWQiLCJnZXQiLCJ0aGVuIiwidXMiLCJlbWFpbCIsIm1vZHVsZUlkIiwicnMiLCJyIiwic3RhcnMiLCJuIiwibGVuZ3RoIiwicmVkdWNlIiwibCIsInN1bW1hcnkiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGVydCIsIm1zZyIsIm1lc3NhZ2UiLCJ0b1N0cmluZyIsInNob3dMZXNzRWRpdFBhbmUiLCJsZXNzb24iLCJhdHRhY2htZW50cyIsImNvbnRlbnQiLCJzZXRMZXNzQ29udGVudCIsInVuc2V0TGVzc0NvbnRlbnQiLCJQcm9taXNlIiwiYWxsIiwiZiIsImFwcGVuZEF0dGFjaG1lbnQiLCJsZXNzb25JZCIsInNob3dRdWVzdEVkaXRQYW5lIiwicXVlc3Rpb24iLCJjb3JyZWN0QW5zd2VyIiwiYmFkQW5zd2VyMSIsImJhZEFuc3dlcjIiLCJiYWRBbnN3ZXIzIiwic2F2ZVByb2dyZXNzIiwicGFuZSIsInF1ZXN0aW9uSWQiLCJ2YXJzIiwicGFyc2UiLCJnZXRJdGVtIiwiaW5uZXJUZXh0IiwidHJpbSIsInZhbHVlIiwidG9nZ2xlTW9kdWxlIiwiZm9jdXNlZE1vZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwibGkiLCJzZXRBdHRyaWJ1dGUiLCJsZXNzUCIsImxzIiwiYXBwZW5kTGVzc29uIiwiUXVlc3RQIiwicXMiLCJxIiwiYXBwZW5kUXVlc3Rpb24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJtcyIsInRvZ2dsZUxlc3NvbiIsImZvY3VzZWRMZXNzSWQiLCJ0b2dnbGVRdWVzdGlvbiIsImFwcGVuZE1vZHVsZSIsIm1vZEVsIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwibGVzc29uRWwiLCJxdWVzdEVsIiwiZmlsZSIsImZzIiwibGlzdCIsInVwZGF0ZU1vZCIsIm1heWJlTmFtZSIsIm1heWJlVG9waWMiLCJtYXliZVN1bW1hcnkiLCJ1cGRhdGUiLCJyZW1vdmVJdGVtIiwidXBkYXRlTGVzcyIsImZvcm0iLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwibGVzc29uSW5wdXQiLCJoYXNMZXNzQ29udCIsImZpbGVzIiwibWF0Y2giLCJhcHBlbmQiLCJkZWJ1ZyIsImVudHJpZXMiLCJBcnJheSIsImZyb20iLCJvdXRlckhUTUwiLCJ1cGRhdGVRdWVzdCIsIm1heWJlQSIsIm1heWJlQmFkQTEiLCJtYXliZUJhZEEyIiwibWF5YmVCYWRBMyIsImRlc3Ryb3lNb2QiLCJkZXN0cm95IiwiZGVzdHJveUxlc3MiLCJtc2dQcm9tIiwiZGVzdHJveVF1ZXN0IiwiZGVzdHJveUF0dGFjaCIsIm9uY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCJjcmVhdGUiLCJsb2dnZWRJbiIsImxvZ091dCIsIm0iXSwibWFwcGluZ3MiOiJ1MUJBQUE7Ozs7O0dBTUEsUUFBU0EsQ0FBQUEsTUFBVCxDQUFnQkMsQ0FBaEIsQ0FBc0JDLENBQXRCLENBQTBCLENBQ3hCLE1BQU9DLENBQUFBLFFBQVEsQ0FBQ0MsYUFBVCw2QkFBNENILENBQUksQ0FBQ0ksV0FBTCxFQUE1Qyx5QkFBOEVILENBQTlFLFFBQXNGSSxTQUF0RixDQUFnR0MsR0FBaEcsQ0FBb0csc0JBQXBHLENBQ1IsQ0FFRDs7OztHQUtBLFFBQVNDLENBQUFBLFFB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QSx1REFBQyxnSEFHR1osUUFBUSxDQUFDaUIsY0FBVCxDQUF3QixpQ0FBeEIsRUFBMkRkLFNBQTNELENBQXFFSSxNQUFyRSxDQUE0RSxjQUE1RSxDQUhILENBS1NtSSxDQUxULENBS29CakksY0FBYyxDQUFDK0QsT0FBZixDQUF1QixVQUF2QixDQUxwQixDQU9Ra0UsQ0FQUiwwQ0FPeUJDLE1BQU0sRUFQL0IseUJBU1M1RyxHQUFHLENBQUMsUUFBRCxDQUFXLENBQUNELFFBQVEsQ0FBRWpCLElBQUksQ0FBQzBELEtBQUwsQ0FBV21FLENBQVgsRUFBcUIzSSxFQUFoQyxDQUFYLENBQUgsQ0FBbURpQyxJQUFuRCxDQUF3RCxTQUFBMEQsQ0FBRSxRQUFJbEMsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlpQyxDQUFFLENBQUM5RCxHQUFILENBQU8sU0FBQWdILENBQUMsUUFBSTlDLENBQUFBLFlBQVksQ0FBQzhDLENBQUQsQ0FBaEIsQ0FBUixDQUFaLENBQUosQ0FBMUQsQ0FUVCxjQVVHNUksQ0FBQUEsUUFBUSxDQUFDaUIsY0FBVCxDQUF3QixpQ0FBeEIsRUFBMkRkLFNBQTNELENBQXFFQyxHQUFyRSxDQUF5RSxjQUF6RSxDQVZILGdFQXVFR0osUUFBUSxDQUFDaUIsY0FBVCxDQUF3QixpQ0FBeEIsRUFBMkRkLFNBQTNELENBQXFFQyxHQUFyRSxDQUF5RSxjQUF6RSxDQXZFSCxDQXdFUzJDLENBeEVULENBd0VlLEtBQUVBLEdBQUYsRUFBUyxLQUFFQyxPQUFYLEVBQXNCLEtBQUVDLFFBQUYsRUF4RXJDLENBeUVHTCxPQUFPLENBQUNDLEtBQVIsTUF6RUgsbUJBMEVVQyxLQUFLLENBQUNDLENBQUQsQ0ExRWYsd0RBQUQsSSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBTZWxlY3QgKGhpZ2hsaWdodCkgYSBsaXN0IGl0ZW0uXHJcbiAqXHJcbiAqIEBwYXJhbSB7J01vZHVsZSd8J0xlc3Nvbid8J1F1ZXN0aW9uJ30gd2hhdFxyXG4gKiBAcGFyYW0geyFOdW1iZXJ9IGlkXHJcbiAqL1xyXG5mdW5jdGlvbiBzZWxlY3Qod2hhdCwgaWQpIHtcclxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtJHt3aGF0LnRvTG93ZXJDYXNlKCl9IGxpW2RhdGEtaWQ9JyR7aWR9J11gKS5jbGFzc0xpc3QuYWRkKCdoYXMtYmFja2dyb3VuZC1saWdodCcpO1xyXG59XHJcblxyXG4vKipcclxuICogVW4tU2VsZWN0ICh1bi1oaWdobGlnaHRzKSBhIGxpc3QgaXRlbS5cclxuICpcclxuICogQHBhcmFtIHsnTW9kdWxlJ3wnTGVzc29uJ3wnUXVlc3Rpb24nfSB3aGF0XHJcbiAqL1xyXG5mdW5jdGlvbiB1blNlbGVjdCh3aGF0KSB7XHJcbiAgY29uc3QgbWF5YmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC0ke3doYXQudG9Mb3dlckNhc2UoKX0gbGlbY2xhc3MqPWhhcy1iYWNrZ3JvdW5kLWxpZ2h0XWApO1xyXG4gIGlmIChtYXliZSkgbWF5YmUuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWJhY2tncm91bmQtbGlnaHQnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhdmVzIHRoZSBsYXN0IGNsaWNrLiAodGhpcyBpcyByZWNhbGxlZCBsYXRlcilcclxuICpcclxuICogQHBhcmFtIHsnTW9kdWxlJ3wnTGVzc29uJ3wnUXVlc3Rpb24nfSB3aGF0XHJcbiAqIEBwYXJhbSB7IU51bWJlcn0gaWRcclxuICovXHJcbmZ1bmN0aW9uIHNhdmVDbGljayh3aGF0LCBpZCkge1xyXG4gIHJldHVybiBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfT9jbGlja2AsIEpTT04uc3RyaW5naWZ5KHtwYWdlOiB3aGF0LnRvTG93ZXJDYXNlKCksIGlkfSkpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXJzIGEgbGlzdC5cclxuICpcclxuICogQHBhcmFtIHsnTW9kdWxlJ3wnTGVzc29uJ3wnUXVlc3Rpb24nfSB3aGF0XHJcbiAqL1xyXG5mdW5jdGlvbiBjbGVhckxpc3Qod2hhdCkge1xyXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbW9kdWxlLWVkaXQtbGlzdC0ke3doYXQudG9Mb3dlckNhc2UoKX1gKS5pbm5lckhUTUwgPSAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIENsZWFycyB0aGUgZWRpdCBwYW5lLlxyXG4gKi9cclxuZnVuY3Rpb24gY2xlYXJQYW5lKCkge1xyXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpLmlubmVySFRNTCA9ICcnO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgaWQgb2Ygc2VsZWN0ZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7J01vZHVsZSd8J0xlc3Nvbid8J1F1ZXN0aW9uJ30gd2hhdFxyXG4gKiBAcmV0dXJuIHs/TnVtYmVyfVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0U2VsSWQod2hhdCkge1xyXG4gIGNvbnN0IG1heWJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtJHt3aGF0LnRvTG93ZXJDYXNlKCl9IGxpW2NsYXNzKj1oYXMtYmFja2dyb3VuZC1saWdodF1gKTtcclxuICByZXR1cm4gbWF5YmUgPyBldmFsKG1heWJlLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKSA6IG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgbGVzc29uIGVkaXQgcGFuZS5cclxuICpcclxuICogQHBhcmFtIHshe2lkOiAhTnVtYmVyLCBuYW1lOiA/U3RyaW5nLCBhdXRob3JJZDogIU51bWJlciwgdG9waWM6ID9TdHJpbmcsIHN1bW1hcnk6ID9TdHJpbmd9fSBtb2R1bGVcclxuICogQHBhcmFtIHshQXJyYXk8IVN0cmluZz59IHRvcGljc1xyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2hvd01vZEVkaXRQYW5lKG1vZHVsZSwgdG9waWNzID0gWyAnQUknLCAnQW50aHJvcG9sb2d5JywgJ0FyY2hlb2xvZ3knLCAnQXJjaGl0ZWN0dXJlJywgJ0FydHMnLCAnQmlvbG9neScsICdDaGVtaXN0cnknLCAnQ29tcHV0ZXIgU2NpZW5jZScsICdEZXNpZ24nLCAnRHJhbWEnLCAnRWNvbm9taWNzJywgJ0VuZ2luZWVyaW5nJywgJ0dlb2dyYXBoeScsICdIaXN0b3J5JywgJ0h1bWFuaXRpZXMnLCAnTGFuZ3VhZ2VzJywgJ0xhdycsICdMaW5ndWlzdGljcycsICdMaXRlcmF0dXJlJywgJ01hdGhlbWF0aWNzJywgJ01lZGljaW5lJywgJ1BoaWxvc29waHknLCAnUGh5c2ljcycsICdQb2xpdGljYWwgU2NpZW5jZScsICdQc3ljaG9sb2d5JywgJ1NjaWVuY2VzJywgJ1NvY2lhbCBTY2llbmNlcycsICdTb2Npb2xvZ3knLCAnVGhlb2xvZ3knXSkge1xyXG4gIHRyeSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpLmlubmVySFRNTCA9IGBcclxuICAgICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtZWFzZS1pblwiPlxyXG4gICAgICAgIDxoMiBjbGFzcz1cInRpdGxlXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxMHB4O1wiPlxyXG4gICAgICAgICAgTmFtZVxyXG4gICAgICAgIDwvaDI+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBpZD1cIm1vZHVsZS1lZGl0LW5hbWVcIiBcclxuICAgICAgICAgICAgIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIiBcclxuICAgICAgICAgICAgIHN0eWxlPVwiYm9yZGVyLXJhZGl1czogMThweDsgYm9yZGVyOiBub25lOyBwYWRkaW5nLXRvcDogNXB4OyBwYWRkaW5nLWJvdHRvbTogNXB4OyBwYWRkaW5nLWxlZnQ6IDEwcHg7IGZvbnQtc2l6ZTogMS4ycmVtO1wiIGNsYXNzPVwiaGFzLWJhY2tncm91bmQtbGlnaHRcIj5cclxuICAgICAgICAgICR7bW9kdWxlLm5hbWUgPyBtb2R1bGUubmFtZSA6ICcnfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxoMyBjbGFzcz1cInN1YnRpdGxlXCIgc3R5bGU9XCJtYXJnaW46IDI1cHggMCAwIDA7XCI+XHJcbiAgICAgICAgICBUb3BpY1xyXG4gICAgICAgIDwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duXCIgXHJcbiAgICAgICAgICAgICBvbm1vdXNlb3Zlcj1cInRoaXMuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJylcIlxyXG4gICAgICAgICAgICAgb25tb3VzZW91dD1cInRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJylcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi10cmlnZ2VyXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gaGFzLWJhY2tncm91bmQtbGlnaHRcIiBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiIGFyaWEtY29udHJvbHM9XCJkcm9wZG93bi1tZW51XCIgc3R5bGU9XCJib3JkZXI6IG5vbmU7XCI+XHJcbiAgICAgICAgICAgICAgPHNwYW4gaWQ9XCJtb2R1bGUtZWRpdC10b3BpY1wiIHN0eWxlPVwibWluLXdpZHRoOiAxNTBweDtcIj4ke21vZHVsZS50b3BpYyA/XHJcbiAgICAgICAgbW9kdWxlLnRvcGljIDpcclxuICAgICAgICAnJ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpY29uIGlzLXNtYWxsXCI+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1hbmdsZS1kb3duXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgaWQ9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cIm1lbnVcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDMwcHg7XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgJHt0b3BpY3MubWFwKFxyXG4gICAgICAgIHQgPT4gXCI8YSBjbGFzcz0nZHJvcGRvd24taXRlbScgb25jbGljaz0nZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxcIm1vZHVsZS1lZGl0LXRvcGljXFxcIikuaW5uZXJUZXh0ID0gdGhpcy5pbm5lclRleHQudHJpbSgpJz5cIiArXHJcbiAgICAgICAgICB0ICsgXCI8L2E+XCIpfVxyXG4gICAgICAgICAgICAgIDxociBjbGFzcz1cImRyb3Bkb3duLWRpdmlkZXJcIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImRyb3Bkb3duLWl0ZW1cIiBzdHlsZT1cImZvbnQtd2VpZ2h0OiBib2xkO1wiPlxyXG4gICAgICAgICAgICAgICAgT3RoZXJcclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgXHJcbiAgICAgICAgICAgICAgICAgb25tb3VzZW91dD1cImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2R1bGUtZWRpdC10b3BpYycpLmlubmVyVGV4dCA9IHRoaXMuaW5uZXJUZXh0LnRyaW0oKVwiIFxyXG4gICAgICAgICAgICAgICAgIGlkPVwibW9kdWxlLWVkaXQtdG9waWMtb3RoZXJcIiBcclxuICAgICAgICAgICAgICAgICBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJcclxuICAgICAgICAgICAgICAgICBzdHlsZT1cIm1hcmdpbjogNXB4IDEwcHg7IG1heC13aWR0aDogOTAlO1wiPlxyXG4gICAgICAgICAgICAgICAgJHttb2R1bGUudG9waWMgPyBtb2R1bGUudG9waWMgOiAnJ31cclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJjb250ZW50XCIgc3R5bGU9XCJtYXJnaW4tdG9wOiA0MHB4O1wiPlxyXG4gICAgICAgICAgPHN0cm9uZz5BdXRob3I8L3N0cm9uZz4gICBcclxuICAgICAgICAgIDxhIGhyZWY9XCIvdXNlci8ke21vZHVsZS5hdXRob3JJZH1cIj5cclxuICAgICAgICAgICAgJHthd2FpdCBnZXQoJ1VzZXInLCB7aWQ6IG1vZHVsZS5hdXRob3JJZH0pLnRoZW4odXMgPT4gdXNbMF0uZW1haWwpfVxyXG4gICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgPHN0cm9uZz5SYXRpbmc8L3N0cm9uZz4gPHNwYW4gaWQ9XCJtb2R1bGUtZWRpdC1yYXRpbmdcIj4ke2F3YWl0IGdldChcclxuICAgICAgICAnUmF0aW5nJywge21vZHVsZUlkOiBtb2R1bGUuaWR9KVxyXG4gICAgICAgIC50aGVuKHJzID0+IHJzLm1hcChyID0+IHIuc3RhcnMpKVxyXG4gICAgICAgIC50aGVuKHJzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBycy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA+IDAgPyBycy5yZWR1Y2UoKGwsIHIpID0+IGwgKyByKSAvIG4gOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgfSl9LzU8L3NwYW4+XHJcbiAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgIDxzZWN0aW9uIGNsYXNzPVwiaXMtbWVkaXVtXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAzMHB4O1wiPlxyXG4gICAgICAgICAgPGgyIGNsYXNzPVwidGl0bGUgaXMtbWVkaXVtXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxMHB4O1wiPlN1bW1hcnk8L2gyPlxyXG4gICAgICAgICAgPHRleHRhcmVhIGlkPVwibW9kdWxlLWVkaXQtc3VtbWFyeVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7XCI+JHttb2R1bGUuc3VtbWFyeSA/IG1vZHVsZS5zdW1tYXJ5IDogJyd9PC90ZXh0YXJlYT5cclxuICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbnMgaXMtY2VudGVyIGlzLW11bHRpbGluZSBpcy1uYXJyb3dcIiBzdHlsZT1cIm1heC13aWR0aDogNDAwcHg7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXMtYmxvY2sgY29sdW1uIGlzLTQtZnVsbGhkIGlzLTQtZGVza3RvcCBpcy00LXRhYmxldCBpcy0xMi1tb2JpbGVcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwicmVzZXRcIiBvbmNsaWNrPVwiYWxlcnQoJ05vdCBJbXBsZW1lbnRlZCBZZXQuJylcIiBjbGFzcz1cImJ1dHRvbiBpcy13YXJuaW5nIGlzLWJsb2NrXCIgc3R5bGU9XCJtYXJnaW46IDdweCBhdXRvOyB3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11bmRvXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICAgIDxzcGFuPlJlc2V0PC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImlzLWJsb2NrIGNvbHVtbiBpcy00LWZ1bGxoZCBpcy00LWRlc2t0b3AgaXMtNC10YWJsZXQgaXMtMTItbW9iaWxlXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIG9uY2xpY2s9XCJ1cGRhdGVNb2QoKVwiIGNsYXNzPVwiYnV0dG9uIGlzLXN1Y2Nlc3MgaXMtYmxvY2tcIiBzdHlsZT1cIm1hcmdpbjogN3B4IGF1dG87IHdpZHRoOiAxMDAlO1wiPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICAgIDxzcGFuPlNhdmU8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXMtYmxvY2sgY29sdW1uIGlzLTQtZnVsbGhkIGlzLTQtZGVza3RvcCBpcy00LXRhYmxldCBpcy0xMi1tb2JpbGVcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiaWYgKGNvbmZpcm0oJ0RlbGV0ZSBtb2R1bGU/JykpIGRlc3Ryb3lNb2QoJHttb2R1bGUuaWR9KVwiIGNsYXNzPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1ibG9ja1wiIHN0eWxlPVwibWFyZ2luOiA3cHggYXV0bzsgd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiA0cHg7IGxlZnQ6IDJweDtcIj48L2k+XHJcbiAgICAgICAgICAgICAgPHNwYW4+RGVsZXRlPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIGA7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIHJldHVybiBhbGVydChlLm1zZyB8fCBlLm1lc3NhZ2UgfHwgZS50b1N0cmluZygpKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgbGVzc29uIGVkaXQgcGFuZS5cclxuICpcclxuICogQHBhcmFtIHt7aWQ6ICFOdW1iZXIsIG1vZHVsZUlkOiAhTnVtYmVyLCBuYW1lOiA/U3RyaW5nLCBjb250ZW50OiA/Qm9vbGVhbiwgc3VtbWFyeTogP1N0cmluZ319IGxlc3NvblxyXG4gKiBAcGFyYW0ge0FycmF5PHtpZDogP051bWJlciwgbmFtZTogIVN0cmluZ30+fSBhdHRhY2htZW50c1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2hvd0xlc3NFZGl0UGFuZShsZXNzb24sIGF0dGFjaG1lbnRzID0gW10pIHtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpLmlubmVySFRNTCA9IGBcclxuICAgIDxmb3JtIGVuY3R5cGU9XCJtdWx0aXBhcnQvZm9ybS1kYXRhXCJcclxuICAgICAgICAgIGlkPVwibW9kdWxlLWVkaXQtZm9ybS1sZXNzb25cIlxyXG4gICAgICAgICAgZGlzYWJsZWQ9XCJ0cnVlXCJcclxuICAgICAgICAgIGNsYXNzPVwibGVzc29uLWVkaXQtZm9ybSBjb2x1bW4gaXMtMTAtZGVza3RvcCBpcy1mdWxsLXRhYmxldCBpcy1mdWxsLW1vYmlsZSBhbmltYXRlLWVhc2UtaW5cIlxyXG4gICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7IG1hcmdpbi10b3A6IC0xNXB4O1wiPlxyXG4gICAgICA8aDIgY2xhc3M9XCJ0aXRsZSBpcy0zXCI+TmFtZTwvaDI+XHJcbiAgICAgIDxpbnB1dCBuYW1lPVwibmFtZVwiIHZhbHVlPVwiJHtsZXNzb24ubmFtZSA/IGxlc3Nvbi5uYW1lIDogJyd9XCIgXHJcbiAgICAgICAgICAgICBjbGFzcz1cImhhcy1iYWNrZ3JvdW5kLWxpZ2h0XCJcclxuICAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9uXCIgcGxhY2Vob2xkZXI9XCJlLmcuIEludHJvZHVjdGlvbiB0byBBSVwiXHJcbiAgICAgICAgICAgICBzdHlsZT1cInBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDE4cHg7IGZvbnQtc2l6ZTogMS4ycmVtO1wiPlxyXG4gICAgICA8aDIgY2xhc3M9XCJ0aXRsZSBpcy0zXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4O1wiPlN1bW1hcnk8L2gyPlxyXG4gICAgICA8dGV4dGFyZWEgbmFtZT1cInN1bW1hcnlcIiBhdXRvY29tcGxldGU9XCJvblwiXHJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImhhcy1iYWNrZ3JvdW5kLWxpZ2h0XCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPVwicGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiA1MHB4OyBtYXgtaGVpZ2h0OiA0MDBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAxOHB4O1wiPiR7bGVzc29uLnN1bW1hcnkgPyBsZXNzb24uc3VtbWFyeSA6ICcnfTwvdGV4dGFyZWE+XHJcbiAgICAgIDxoMiBjbGFzcz1cInRpdGxlIGlzLTNcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDIwcHg7XCI+Q29udGVudDwvaDI+XHJcbiAgICAgIDxwIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMTBweDtcIj5VcGxvYWQgSFRNTCBmaWxlIHdpdGggdGhlIGxlc3NvbiBjb250ZW50PC9wPlxyXG4gICAgICA8ZGl2IGlkPVwibW9kdWxlLWVkaXQtbGVzc29uLWNvbnRlbnRcIj48L2Rpdj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgbmFtZT1cImxlc3NvblwiIGNsYXNzPVwiaXMtcGFkZGluZ2xlc3NcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDIwcHg7XCI+XHJcbiAgICAgIDxoMiBjbGFzcz1cInRpdGxlIGlzLTNcIiBzdHlsZT1cIm1hcmdpbi10b3A6IDIwcHg7XCI+QXR0YWNobWVudHMgKG9wdGlvbmFsKTwvaDI+XHJcbiAgICAgIDxwPjxzdHJvbmc+U2VsZWN0IGEgZmlsZTo8L3N0cm9uZz48L3A+XHJcbiAgICAgIDxicj5cclxuICAgICAgPHVsIHN0eWxlPVwibGlzdC1zdHlsZS10eXBlOiBkaXNjOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7IG1hcmdpbi1sZWZ0OiAxOXB4O1wiPlxyXG4gICAgICAgIDxsaT5JbWFnZSAoLmpwZywgLmpwZWcsIC5wbmcsIC5naWYpPC9saT5cclxuICAgICAgICA8bGk+QXVkaW8gKC5tcDMpPC9saT5cclxuICAgICAgICA8bGk+VmlkZW8gKC5tcDQsIC5tcGcpPC9saT5cclxuICAgICAgPC91bD5cclxuICAgICAgPGJyPlxyXG4gICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBuYW1lPVwiYXR0YWNobWVudHNcIiBjbGFzcz1cImlzLXBhZGRpbmdsZXNzXCIgbXVsdGlwbGUgc3R5bGU9XCJkaXNwbGF5OiBibG9ja1wiPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBtYXJnaW4tdG9wOiAyMHB4OyB3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICA8aDMgaWQ9XCJsZXNzb24tZWRpdC1oLXVwbG9hZGVkLWZpbGVzIHRpdGxlIGlzLTVcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDhweDtcIj5cclxuICAgICAgICAgIFVwbG9hZGVkIEZpbGVzXHJcbiAgICAgICAgPC9oMz5cclxuICAgICAgICA8dWwgaWQ9XCJtb2R1bGUtZWRpdC1saXN0LWF0dGFjaG1lbnRzXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyB3aWR0aDogMTAwJTtcIj48L3VsPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbnMgaXMtY2VudGVyIGlzLW11bHRpbGluZSBpcy1uYXJyb3dcIiBzdHlsZT1cIm1heC13aWR0aDogNDAwcHg7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlzLWJsb2NrIGNvbHVtbiBpcy00LWZ1bGxoZCBpcy00LWRlc2t0b3AgaXMtNC10YWJsZXQgaXMtMTItbW9iaWxlXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJhbGVydCgnTm90IEltcGxlbWVudGVkIFlldC4nKVwiIHR5cGU9XCJyZXNldFwiIGNsYXNzPVwiYnV0dG9uIGlzLWJsb2NrIGlzLXdhcm5pbmdcIiBzdHlsZT1cIm1hcmdpbjogN3B4IGF1dG87IHdpZHRoOiAxMDAlO1wiPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS11bmRvXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICA8c3Bhbj5SZXNldDwvc3Bhbj5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpcy1ibG9jayBjb2x1bW4gaXMtNC1mdWxsaGQgaXMtNC1kZXNrdG9wIGlzLTQtdGFibGV0IGlzLTEyLW1vYmlsZVwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiZXZlbnQucHJldmVudERlZmF1bHQoKTsgdXBkYXRlTGVzcygpXCIgY2xhc3M9XCJidXR0b24gaXMtYmxvY2sgaXMtc3VjY2Vzc1wiIHN0eWxlPVwibWFyZ2luOiA3cHggYXV0bzsgd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICA8c3Bhbj5TYXZlPC9zcGFuPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlzLWJsb2NrIGNvbHVtbiBpcy00LWZ1bGxoZCBpcy00LWRlc2t0b3AgaXMtNC10YWJsZXQgaXMtMTItbW9iaWxlXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBpZiAoY29uZmlybSgnRGVsZXRlIGxlc3Nvbj8nKSkgZGVzdHJveUxlc3MoJHtsZXNzb24uaWR9KVwiIGNsYXNzPVwiYnV0dG9uIGlzLWJsb2NrIGlzLWRhbmdlclwiIHN0eWxlPVwibWFyZ2luOiA3cHggYXV0bzsgd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICA8c3Bhbj5EZWxldGU8L3NwYW4+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Zvcm0+XHJcbiAgICBgO1xyXG5cclxuICBpZiAobGVzc29uLmNvbnRlbnQpIHNldExlc3NDb250ZW50KCk7XHJcbiAgZWxzZSB1bnNldExlc3NDb250ZW50KCk7XHJcblxyXG4gIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChhdHRhY2htZW50cy5tYXAoZiA9PiBhcHBlbmRBdHRhY2htZW50KHtpZDogZi5pZCwgbGVzc29uSWQ6IGxlc3Nvbi5pZCwgbmFtZTogZi5uYW1lfSkpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3dzIHRoZSBxdWVzdGlvbiBlZGl0IHBhbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7e2lkOiAhTnVtYmVyLCBtb2R1bGVJZDogIU51bWJlciwgY29ycmVjdEFuc3dlcjogP1N0cmluZywgYmFkQW5zd2VyMTogP1N0cmluZywgYmFkQW5zd2VyMjogP1N0cmluZywgYmFkQW5zd2VyMzogP1N0cmluZ319IHF1ZXN0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBzaG93UXVlc3RFZGl0UGFuZShxdWVzdGlvbikge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2R1bGUtZWRpdC1wYW5lJykuaW5uZXJIVE1MID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImFuaW1hdGUtZWFzZS1pblwiPlxyXG4gICAgICA8aDEgY2xhc3M9XCJ0aXRsZSBpcy0zXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxMHB4O1wiPlF1ZXN0aW9uPC9oMT5cclxuICAgICAgPHA+PHN0cm9uZz5Ob3RlOjwvc3Ryb25nPiBTYXZlIHRoZSBjdXJyZW50IHF1ZXN0aW9uIGJlZm9yZSBlZGl0aW5nIGFub3RoZXIgb25lPC9wPlxyXG4gICAgICA8YnI+XHJcbiAgICAgIDxhIGlkPVwibW9kdWxlLWVkaXQtcXVlc3Rpb24tbmFtZVwiIGNsYXNzPVwiYnV0dG9uIGlzLWxpZ2h0IGhhcy1iYWNrZ3JvdW5kLWxpZ2h0IGlzLWJsb2NrIGhhcy10ZXh0LWxlZnRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCIgc3R5bGU9XCJwYWRkaW5nOiAzcHggMTVweFwiPlxyXG4gICAgICAgICR7cXVlc3Rpb24ubmFtZSA/IHF1ZXN0aW9uLm5hbWUgOiAnJ31cclxuICAgICAgPC9hPlxyXG4gICAgICA8YnI+XHJcblxyXG4gICAgICA8aDIgY2xhc3M9XCJ0aXRsZSBpcy0zXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxMHB4O1wiPkNvcnJlY3QgQW5zd2VyPC9oMj5cclxuICAgICAgPGEgaWQ9XCJtb2R1bGUtZWRpdC1xdWVzdGlvbi1hbnN3ZXJcIiBjbGFzcz1cImJ1dHRvbiBpcy1saWdodCBpcy1ibG9jayBoYXMtdGV4dC1sZWZ0XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiIHN0eWxlPVwicGFkZGluZzogM3B4IDE1cHg7XCI+XHJcbiAgICAgICAgJHtxdWVzdGlvbi5jb3JyZWN0QW5zd2VyID8gcXVlc3Rpb24uY29ycmVjdEFuc3dlciA6ICcnfVxyXG4gICAgICA8L2E+XHJcbiAgICAgIFxyXG4gICAgICA8aDMgY2xhc3M9XCJ0aXRsZSBpcy0zXCIgc3R5bGU9XCJtYXJnaW46IDMwcHggMCAxMHB4IDA7XCI+T3RoZXIgQW5zd2VyczwvaDM+XHJcblxyXG4gICAgICA8cD48c3Ryb25nPk5vdGU6PC9zdHJvbmc+IEluY2x1ZGUgb3RoZXIgYW5zd2VycyB3aGljaCBhcmUgd3Jvbmc8L3A+XHJcblxyXG4gICAgICA8YnI+XHJcblxyXG4gICAgICA8YSBpZD1cIm1vZHVsZS1lZGl0LXF1ZXN0aW9uLWJhZC1hbnN3ZXItMVwiIGNsYXNzPVwiYnV0dG9uIGlzLWxpZ2h0IGhhcy10ZXh0LWxlZnRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgcGFkZGluZzogM3B4IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7XCI+XHJcbiAgICAgICAgJHtxdWVzdGlvbi5iYWRBbnN3ZXIxID8gcXVlc3Rpb24uYmFkQW5zd2VyMSA6ICcnfVxyXG4gICAgICA8L2E+XHJcblxyXG4gICAgICA8YSBpZD1cIm1vZHVsZS1lZGl0LXF1ZXN0aW9uLWJhZC1hbnN3ZXItMlwiIGNsYXNzPVwiYnV0dG9uIGlzLWxpZ2h0IGhhcy10ZXh0LWxlZnRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgcGFkZGluZzogM3B4IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7XCI+XHJcbiAgICAgICAgJHtxdWVzdGlvbi5iYWRBbnN3ZXIyID8gcXVlc3Rpb24uYmFkQW5zd2VyMiA6ICcnfVxyXG4gICAgICA8L2E+XHJcbiAgICAgIFxyXG4gICAgICA8YSBpZD1cIm1vZHVsZS1lZGl0LXF1ZXN0aW9uLWJhZC1hbnN3ZXItM1wiIGNsYXNzPVwiYnV0dG9uIGlzLWxpZ2h0IGhhcy10ZXh0LWxlZnRcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTsgcGFkZGluZzogM3B4IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7XCI+XHJcbiAgICAgICAgJHtxdWVzdGlvbi5iYWRBbnN3ZXIzID8gcXVlc3Rpb24uYmFkQW5zd2VyMyA6ICcnfVxyXG4gICAgICA8L2E+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29sdW1ucyBpcy1jZW50ZXIgaXMtbXVsdGlsaW5lIGlzLW5hcnJvd1wiIHN0eWxlPVwibWF4LXdpZHRoOiA0MDBweDsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bztcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaXMtYmxvY2sgY29sdW1uIGlzLTQtZnVsbGhkIGlzLTQtZGVza3RvcCBpcy00LXRhYmxldCBpcy0xMi1tb2JpbGVcIj5cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cInJlc2V0XCIgb25jbGljaz1cImFsZXJ0KCdOb3QgSW1wbGVtZW50ZWQgWWV0LicpXCIgY2xhc3M9XCJidXR0b24gaXMtYmxvY2sgaXMtd2FybmluZ1wiIHN0eWxlPVwibWFyZ2luOiA3cHggYXV0bzsgd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXVuZG9cIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiA0cHg7IGxlZnQ6IDJweDtcIj48L2k+XHJcbiAgICAgICAgICAgIDxzcGFuPlJlc2V0PC9zcGFuPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImlzLWJsb2NrIGNvbHVtbiBpcy00LWZ1bGxoZCBpcy00LWRlc2t0b3AgaXMtNC10YWJsZXQgaXMtMTItbW9iaWxlXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBvbmNsaWNrPVwidXBkYXRlUXVlc3QoKVwiIGNsYXNzPVwiYnV0dG9uIGlzLWJsb2NrIGlzLXN1Y2Nlc3NcIiBzdHlsZT1cIm1hcmdpbjogN3B4IGF1dG87IHdpZHRoOiAxMDAlO1wiPlxyXG4gICAgICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDRweDsgbGVmdDogMnB4O1wiPjwvaT5cclxuICAgICAgICAgICAgPHNwYW4+U2F2ZTwvc3Bhbj5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJpcy1ibG9jayBjb2x1bW4gaXMtNC1mdWxsaGQgaXMtNC1kZXNrdG9wIGlzLTQtdGFibGV0IGlzLTEyLW1vYmlsZVwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiaWYgKGNvbmZpcm0oJ0RlbGV0ZSBxdWVzdGlvbj8nKSkgZGVzdHJveVF1ZXN0KCR7cXVlc3Rpb24uaWR9KVwiIGNsYXNzPVwiYnV0dG9uIGlzLWJsb2NrIGlzLWRhbmdlclwiIHN0eWxlPVwibWFyZ2luOiA3cHggYXV0bzsgd2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4OyBsZWZ0OiAycHg7XCI+PC9pPlxyXG4gICAgICAgICAgICA8c3Bhbj5EZWxldGU8L3NwYW4+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgO1xyXG59XHJcblxyXG4vKipcclxuICogTWVtb3JpemUgdGhlIGNoYW5nZXMgbWFkZSB0byB0aGUgaW5wdXQgKG9yIGNvbnRlbnRlZGl0YWJsZSkgZmllbGRzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2F2ZVByb2dyZXNzKCkge1xyXG4gIGNvbnN0IHBhbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpO1xyXG4gIGNvbnN0IG1vZHVsZUlkID0gZ2V0U2VsSWQoJ01vZHVsZScpO1xyXG4gIGNvbnN0IGxlc3NvbklkID0gZ2V0U2VsSWQoJ0xlc3NvbicpO1xyXG4gIGNvbnN0IHF1ZXN0aW9uSWQgPSBnZXRTZWxJZCgnUXVlc3Rpb24nKTtcclxuICBpZiAobW9kdWxlSWQgJiYgbGVzc29uSWQgJiYgIXF1ZXN0aW9uSWQpIHtcclxuICAgIC8vIFRPRE8gc2F2ZVByb2dyZXNzIGZvciBsZXNzb25cclxuICB9IGVsc2UgaWYgKG1vZHVsZUlkICYmICFsZXNzb25JZCAmJiBxdWVzdGlvbklkKSB7XHJcbiAgICBpZiAoIXBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXF1ZXN0aW9uLWFuc3dlcicpKSByZXR1cm47XHJcbiAgICBjb25zdCB2YXJzID0gSlNPTi5zdHJpbmdpZnkoW3tcclxuICAgICAgYXV0aG9ySWQ6IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkSW4nKSkuaWQsXHJcbiAgICAgIGJhZEFuc3dlcjEgOiBwYW5lLnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1xdWVzdGlvbi1iYWQtYW5zd2VyLTEnKS5pbm5lclRleHQudHJpbSgpLFxyXG4gICAgICBiYWRBbnN3ZXIyIDogcGFuZS5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlLWVkaXQtcXVlc3Rpb24tYmFkLWFuc3dlci0yJykuaW5uZXJUZXh0LnRyaW0oKSxcclxuICAgICAgYmFkQW5zd2VyMyA6IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXF1ZXN0aW9uLWJhZC1hbnN3ZXItMycpLmlubmVyVGV4dC50cmltKCksXHJcbiAgICAgIGNvcnJlY3RBbnN3ZXIgOiBwYW5lLnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1xdWVzdGlvbi1hbnN3ZXInKS5pbm5lclRleHQudHJpbSgpLFxyXG4gICAgICBuYW1lIDogcGFuZS5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlLWVkaXQtcXVlc3Rpb24tbmFtZScpLmlubmVyVGV4dC50cmltKCksXHJcbiAgICB9XSk7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9xdWVzdGlvbnM/aWQ9JHtxdWVzdGlvbklkfWAsIHZhcnMpO1xyXG4gICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oYCR7bG9jYXRpb24ucGF0aG5hbWV9L3F1ZXN0aW9ucz9pZD0ke3F1ZXN0aW9uSWR9Jm1vZHVsZUlkPSR7bW9kdWxlSWR9YCwgdmFycyk7XHJcbiAgfSBlbHNlIGlmIChtb2R1bGVJZCAmJiAhbGVzc29uSWQgJiYgIXF1ZXN0aW9uSWQpIHtcclxuICAgIGlmICghcGFuZS5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlLWVkaXQtbmFtZScpKSByZXR1cm47XHJcbiAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbW9kdWxlcz9pZD0ke21vZHVsZUlkfWAsXHJcbiAgICAgIEpTT04uc3RyaW5naWZ5KFt7XHJcbiAgICAgICAgbmFtZTogcGFuZS5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlLWVkaXQtbmFtZScpLmlubmVyVGV4dC50cmltKCksXHJcbiAgICAgICAgdG9waWM6IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXRvcGljJykuaW5uZXJUZXh0LnRyaW0oKSxcclxuICAgICAgICBhdXRob3JJZDogSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRJbicpKS5pZCxcclxuICAgICAgICBzdW1tYXJ5OiBwYW5lLnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1zdW1tYXJ5JykudmFsdWUudHJpbSgpLFxyXG4gICAgICB9XSkpO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZ2dsZSBtb2R1bGUuIFJ1biB3aGVuIGEgbW9kdWxlIGlzIHByZXNzZWQuIFNob3dzIHRoZSBtb2R1bGUtZWRpdCBwYW5lLlxyXG4gKlxyXG4gKiBAcGFyYW0geyFOdW1iZXJ9IGlkXHJcbiAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVNb2R1bGUoaWQpIHtcclxuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtb2R1bGUtZWRpdC1saXN0LW1vZHVsZSA+IGxpW2RhdGEtaWQ9JyR7aWR9J11gKSkgcmV0dXJuO1xyXG4gIHNhdmVDbGljaygnTW9kdWxlJywgaWQpO1xyXG4gIHNhdmVQcm9ncmVzcygpO1xyXG4gIGNvbnN0IGZvY3VzZWRNb2QgPSBnZXRTZWxJZCgnTW9kdWxlJyk7XHJcblxyXG4gIGlmIChmb2N1c2VkTW9kID09PSBpZCAmJiAhZ2V0U2VsSWQoJ0xlc3NvbicpICYmICFnZXRTZWxJZCgnUXVlc3Rpb24nKSkge1xyXG4gICAgLy8gcmUtc2VsZWN0ICp0aGUgc2FtZSogbW9kdWxlIC0gZG8gbm90aGluZ1xyXG4gICAgcmV0dXJuO1xyXG4gIH0gLy8gZWxzZVxyXG5cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjbW9kdWxlLWVkaXQtbGlzdC1tb2R1bGUgPiBsaVtkYXRhLWlkXWApLmZvckVhY2gobGkgPT4gbGkuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJykpO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpLmlubmVySFRNTCA9IGBcclxuICAgIDxwIGNsYXNzPVwiaGFzLXRleHQtY2VudGVyZWRcIiBzdHlsZT1cIm1hcmdpbjogMTBweCBhdXRvO1wiPlxyXG4gICAgICA8c3BhbiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDE1cHg7XCI+TG9hZGluZzwvc3Bhbj5cclxuICAgICAgPGJyPlxyXG4gICAgICA8aSBjbGFzcz1cImZhcyBmYS1zcGlubmVyIHNwaW5uZXJcIj48L2k+XHJcbiAgICA8L3A+YDtcclxuICB1blNlbGVjdCgnTGVzc29uJyk7XHJcbiAgdW5TZWxlY3QoJ1F1ZXN0aW9uJyk7XHJcblxyXG4gIGlmIChmb2N1c2VkTW9kICE9PSBpZCkge1xyXG4gICAgLy8gc2VsZWN0ZWQgKmRpZmZlcmVudCogbW9kdWxlXHJcbiAgICB1blNlbGVjdCgnTW9kdWxlJyk7XHJcbiAgICBzZWxlY3QoJ01vZHVsZScsIGlkKTtcclxuICAgIGNsZWFyTGlzdCgnTGVzc29uJyk7XHJcbiAgICBjbGVhckxpc3QoJ1F1ZXN0aW9uJyk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtc3Bpbm5lci1saXN0LWxlc3NvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXNwaW5uZXItbGlzdC1xdWVzdGlvbicpLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWludmlzaWJsZScpO1xyXG4gICAgY29uc3QgbGVzc1AgPSBnZXQoJ0xlc3NvbicsIHttb2R1bGVJZDogaWR9KVxyXG4gICAgICAudGhlbihscyA9PiBQcm9taXNlLmFsbChscy5tYXAobCA9PiBhcHBlbmRMZXNzb24obCkpKSk7XHJcbiAgICBjb25zdCBRdWVzdFAgPSBnZXQoJ1F1ZXN0aW9uJywge21vZHVsZUlkOiBpZH0pXHJcbiAgICAgIC50aGVuKHFzID0+IFByb21pc2UuYWxsKHFzLm1hcChxID0+IGFwcGVuZFF1ZXN0aW9uKHEpKSkpO1xyXG4gICAgYXdhaXQgbGVzc1A7XHJcbiAgICBhd2FpdCBRdWVzdFA7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtc3Bpbm5lci1saXN0LWxlc3NvbicpLmNsYXNzTGlzdC5hZGQoJ2lzLWludmlzaWJsZScpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXNwaW5uZXItbGlzdC1xdWVzdGlvbicpLmNsYXNzTGlzdC5hZGQoJ2lzLWludmlzaWJsZScpO1xyXG4gIH1cclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgI21vZHVsZS1lZGl0LWxpc3QtbW9kdWxlID4gbGlgKS5mb3JFYWNoKGxpID0+IGxpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKSk7XHJcbiAgcmV0dXJuIHNob3dNb2RFZGl0UGFuZShhd2FpdCBnZXQoJ01vZHVsZScsIHtpZH0pLnRoZW4obXMgPT4gbXNbMF0pKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZ2dsZSBtb2R1bGUuIFJ1biB3aGVuIGEgbW9kdWxlIGlzIHByZXNzZWQuIFNob3dzIHRoZSBtb2R1bGUtZWRpdCBwYW5lLlxyXG4gKlxyXG4gKiBAcGFyYW0geyFOdW1iZXJ9IGlkXHJcbiAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVMZXNzb24oaWQpIHtcclxuICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtb2R1bGUtZWRpdC1saXN0LWxlc3NvbiA+IGxpW2RhdGEtaWQ9JyR7aWR9J11gKSkgcmV0dXJuO1xyXG4gIGNvbnN0IGZvY3VzZWRMZXNzSWQgPSBnZXRTZWxJZCgnTGVzc29uJyk7XHJcbiAgaWYgKGlkID09PSBmb2N1c2VkTGVzc0lkKSByZXR1cm47XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vZHVsZS1lZGl0LWxpc3QtbGVzc29uID4gbGlbZGF0YS1pZF0nKS5mb3JFYWNoKGxpID0+IGxpLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpLmlubmVySFRNTCA9IGBcclxuICAgIDxwIGNsYXNzPVwiaGFzLXRleHQtY2VudGVyZWRcIiBzdHlsZT1cIm1hcmdpbjogMTBweCBhdXRvO1wiPlxyXG4gICAgICA8c3BhbiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDE1cHg7XCI+TG9hZGluZzwvc3Bhbj5cclxuICAgICAgPGJyPlxyXG4gICAgICA8aSBjbGFzcz1cImZhcyBmYS1zcGlubmVyIHNwaW5uZXJcIj48L2k+XHJcbiAgICA8L3A+YDtcclxuICBzYXZlQ2xpY2soJ0xlc3NvbicsIGlkKTtcclxuICBzYXZlUHJvZ3Jlc3MoKTtcclxuICB1blNlbGVjdChmb2N1c2VkTGVzc0lkID09PSBudWxsID8gJ1F1ZXN0aW9uJyA6ICdMZXNzb24nKTtcclxuICBzZWxlY3QoJ0xlc3NvbicsIGlkKTtcclxuICBjb25zdCBsZXNzb24gPSAoYXdhaXQgZ2V0KCdMZXNzb24nLCB7aWQsIG1vZHVsZUlkOiBnZXRTZWxJZCgnTW9kdWxlJyl9KSlbMF07XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vZHVsZS1lZGl0LWxpc3QtbGVzc29uID4gbGlbZGF0YS1pZF0nKS5mb3JFYWNoKGxpID0+IGxpLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKSk7XHJcbiAgcmV0dXJuIGF3YWl0IHNob3dMZXNzRWRpdFBhbmUobGVzc29uLCBhd2FpdCBnZXQoJ0ZpbGUnLCB7bGVzc29uSWQ6IGxlc3Nvbi5pZH0pKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRvZ2dsZSBxdWVzdGlvbi4gUnVuIHdoZW4gYSBxdWVzdGlvbiBpcyBwcmVzc2VkLiBTaG93cyB0aGUgcXVlc3Rpb24tZWRpdCBwYW5lLlxyXG4gKlxyXG4gKiBAcGFyYW0geyFOdW1iZXJ9IGlkXHJcbiAqIEByZXR1cm4ge1Byb21pc2U8dm9pZD59XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVRdWVzdGlvbihpZCkge1xyXG4gIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtcXVlc3Rpb24gPiBsaVtkYXRhLWlkPScke2lkfSddYCkpIHJldHVybjtcclxuICBpZiAoaWQgPT09IGdldFNlbElkKCdRdWVzdGlvbicpKSByZXR1cm47XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vZHVsZS1lZGl0LWxpc3QtcXVlc3Rpb24gPiBsaVtkYXRhLWlkXScpLmZvckVhY2gobGkgPT4gbGkuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJykpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2R1bGUtZWRpdC1wYW5lJykuaW5uZXJIVE1MID0gYFxyXG4gICAgPHAgY2xhc3M9XCJoYXMtdGV4dC1jZW50ZXJlZFwiIHN0eWxlPVwibWFyZ2luOiAxMHB4IGF1dG87XCI+XHJcbiAgICAgIDxzcGFuIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMTVweDtcIj5Mb2FkaW5nPC9zcGFuPlxyXG4gICAgICA8YnI+XHJcbiAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXNwaW5uZXIgc3Bpbm5lclwiPjwvaT5cclxuICAgIDwvcD5gO1xyXG4gIHNhdmVDbGljaygnUXVlc3Rpb24nLCBpZCk7XHJcbiAgc2F2ZVByb2dyZXNzKCk7XHJcbiAgdW5TZWxlY3QoJ1F1ZXN0aW9uJyk7XHJcbiAgdW5TZWxlY3QoJ0xlc3NvbicpO1xyXG4gIHNlbGVjdCgnUXVlc3Rpb24nLCBpZCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21vZHVsZS1lZGl0LWxpc3QtcXVlc3Rpb24gPiBsaVtkYXRhLWlkXScpLmZvckVhY2gobGkgPT4gbGkucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpKTtcclxuICByZXR1cm4gYXdhaXQgc2hvd1F1ZXN0RWRpdFBhbmUoKGF3YWl0IGdldCgnUXVlc3Rpb24nLCB7aWQsIG1vZHVsZUlkOiBnZXRTZWxJZCgnTW9kdWxlJyl9KSlbMF0pO1xyXG59XHJcblxyXG4vKipcclxuICogQXBwZW5kcyBhIG5ldyBtb2R1bGUgdG8gbW9kdWxlIGxpc3QgKGxlZnQtbW9zdCBsaXN0KS5cclxuICpcclxuICogQHBhcmFtIHt7aWQ6ICFOdW1iZXIsIGF1dGhvcklkOiAhTnVtYmVyLCBuYW1lOiA/U3RyaW5nfX0gbW9kdWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBlbmRNb2R1bGUobW9kdWxlID0ge2lkOiBudWxsICwgbmFtZTogbnVsbH0pIHtcclxuICBjb25zdCBtb2RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgbW9kRWwuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgbW9kdWxlLmlkKTtcclxuICBtb2RFbC5pbm5lckhUTUwgPSBgXHJcbiAgICA8YSBvbmNsaWNrPVwidG9nZ2xlTW9kdWxlKCR7bW9kdWxlLmlkfSlcIiBzdHlsZT1cIm1pbi13aWR0aDogMTAwcHg7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1yaWdodDogNXB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogcm93OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XHJcbiAgICAgIDxzcGFuPiR7bW9kdWxlLm5hbWUgPyBtb2R1bGUubmFtZSA6ICd1bm5hbWVkICMnICsgbW9kdWxlLmlkLnRvU3RyaW5nKCl9PC9zcGFuPlxyXG4gICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1zbWFsbFwiIHN0eWxlPVwid2lkdGg6IDIwcHg7IGhlaWdodDogMjNweDtcIiBvbmNsaWNrPVwiaWYgKGNvbmZpcm0oJ0RlbGV0ZSBtb2R1bGU/JykpIGRlc3Ryb3lNb2QoJHttb2R1bGUuaWR9KTtcIj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhcyBmYS10aW1lcyBmYS14c1wiIHN0eWxlPVwibWFyZ2luOiBpbml0aWFsO1wiPjwvaT5cclxuICAgICAgPC9idXR0b24+XHJcbiAgICA8L2E+YDtcclxuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LWxpc3QtbW9kdWxlJykuYXBwZW5kQ2hpbGQobW9kRWwpO1xyXG59XHJcblxyXG4vKipcclxuICogQXBwZW5kcyBhIGxlc3NvbiB0byB0aGUgbGlzdCBvZiBsZXNzb25zIEFORCBjcmVhdGVkIGEgZm9ybSBmb3IgZWRpdGluZyBpdC5cclxuICpcclxuICogQHBhcmFtIHt7aWQ6ICFOdW1iZXIsIG1vZHVsZUlkOiAhTnVtYmVyLCBuYW1lOiA/U3RyaW5nfX0gbGVzc29uXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBlbmRMZXNzb24obGVzc29uKSB7XHJcbiAgLy8gYXBwZW5kIHRvIHRoZSBzZWNvbmQgKGxlc3NvbikgbWVudVxyXG4gIGNvbnN0IGxlc3NvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICBsZXNzb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kdWxlLWlkJywgbGVzc29uLm1vZHVsZUlkKTtcclxuICBsZXNzb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBsZXNzb24uaWQpO1xyXG4gIGxlc3NvbkVsLmlubmVySFRNTCA9IGBcclxuICAgIDxhIG9uY2xpY2s9XCJ0b2dnbGVMZXNzb24oJHtsZXNzb24uaWR9KVwiIHN0eWxlPVwicGFkZGluZzogNXB4IDEwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiByb3c7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cclxuICAgICAgPHNwYW4+JHtsZXNzb24ubmFtZSA/IGxlc3Nvbi5uYW1lIDogJ3VubmFtZWQgIycgKyBsZXNzb24uaWR9PC9zcGFuPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IHJvdzsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1wiPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gaXMtc21hbGwgaXMtZGFuZ2VyXCIgb25jbGljaz1cImlmIChjb25maXJtKCdEZWxldGUgbGVzc29uPycpKSBkZXN0cm95TGVzcygke2xlc3Nvbi5pZH0pO1wiIHN0eWxlPVwid2lkdGg6IDIwcHg7IGhlaWdodDogMjNweDtcIj5cclxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzIGZhLXhzXCIgc3R5bGU9XCJtYXJnaW46IGluaXRpYWw7XCI+PC9pPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvYT5gO1xyXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtbGlzdC1sZXNzb24nKS5hcHBlbmRDaGlsZChsZXNzb25FbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBlbmRzIGEgcXVlc3Rpb24gdG8gdGhlIHF1aXogZm9yIHRoZSBzZWxlY3RlZCBtb2R1bGUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7e2lkOiAhTnVtYmVyLCBtb2R1bGVJZDogIU51bWJlciwgbmFtZTogP1N0cmluZywgY29ycmVjdEFuc3dlcjogP1N0cmluZywgYmFkQW5zd2VyMTogP1N0cmluZywgYmFkQW5zd2VyMjogP1N0cmluZywgYmFkQW5zd2VyMzogP1N0cmluZ319IHF1ZXN0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBlbmRRdWVzdGlvbihxdWVzdGlvbikge1xyXG4gIGNvbnN0IHF1ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gIHF1ZXN0RWwuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgcXVlc3Rpb24uaWQpO1xyXG4gIHF1ZXN0RWwuc2V0QXR0cmlidXRlKCdkYXRhLW1vZHVsZS1pZCcsIHF1ZXN0aW9uLm1vZHVsZUlkKTtcclxuICBxdWVzdEVsLmlubmVySFRNTCA9IGBcclxuICAgIDxhIGNsYXNzPVwiaGFzLXRleHQtZGFya1wiIG9uY2xpY2s9XCJ0b2dnbGVRdWVzdGlvbigke3F1ZXN0aW9uLmlkfSlcIiBzdHlsZT1cInBhZGRpbmc6IDVweCAxMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogcm93OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XHJcbiAgICAgIDxzcGFuPiR7cXVlc3Rpb24ubmFtZSA/IHF1ZXN0aW9uLm5hbWUgOiAndW5uYW1lZCAjJyArIHF1ZXN0aW9uLmlkfTwvc3Bhbj5cclxuICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiByb3c7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcIj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGlzLXNtYWxsIGlzLWRhbmdlclwiIG9uY2xpY2s9XCJpZiAoY29uZmlybSgnRGVsZXRlIHF1ZXN0aW9uPycpKSBkZXN0cm95UXVlc3QoJHtxdWVzdGlvbi5pZH0pO1wiIHN0eWxlPVwid2lkdGg6IDIwcHg7IGhlaWdodDogMjNweDtcIj5cclxuICAgICAgICAgIDxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzIGZhLXhzXCIgc3R5bGU9XCJtYXJnaW46IGluaXRpYWw7XCI+PC9pPlxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvYT5cclxuICBgO1xyXG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1xdWVzdGlvbmApLmFwcGVuZENoaWxkKHF1ZXN0RWwpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkcyBhdHRhY2htZW50IHRvIGEgbGlzdCBvZiBhdHRhY2htZW50cyBpbiBhIGxlc3Nvbi5cclxuICpcclxuICogQHBhcmFtIHshe2lkOiA/TnVtYmVyLCBsZXNzb25JZDogIU51bWJlciwgbmFtZTogIVN0cmluZ319IGZpbGVcclxuICogQHJldHVybiB7dm9pZH1cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGVuZEF0dGFjaG1lbnQoZmlsZSkge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBhZnRlciBzZW5kaW5nIHlvdSBkb24ndCBoYXZlIHRoZSBpZHMgKGFzc2lnbmVkIGJ5IHRoZSBEQk1TKVxyXG4gICAgaWYgKGZpbGUuaWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBmaWxlLmlkID0gYXdhaXQgZ2V0KCdGaWxlJywge2xlc3NvbklkOiBmaWxlLmxlc3NvbklkLCAgbmFtZTogZmlsZS5uYW1lfSkudGhlbihmcyA9PiBmc1swXS5pZCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LWxpc3QtYXR0YWNobWVudHMnKTtcclxuICAgIGxpc3QuaW5uZXJIVE1MICs9IGBcclxuICAgIDxsaSBjbGFzcz1cImhhcy10ZXh0LWJsYWNrIGhhcy1iYWNrZ3JvdW5kLWxpZ2h0XCJcclxuICAgICAgICBkYXRhLW5hbWU9XCIke2ZpbGUubmFtZX1cIlxyXG4gICAgICAgIGRhdGEtaWQ9XCIke2ZpbGUuaWR9XCJcclxuICAgICAgICBzdHlsZT1cInBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IHdpZHRoOiAxMDAlO1wiPlxyXG4gICAgICA8cCBzdHlsZT1cIm1hcmdpbi1ib3R0b206IGF1dG87IG1hcmdpbi10b3A6IGF1dG87IGZsb2F0OiBsZWZ0OyBwb3NpdGlvbjogcmVsYXRpdmU7IHRvcDogNHB4O1wiPiR7ZmlsZS5uYW1lfTwvcD5cclxuICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IGF1dG87IG1hcmdpbi10b3A6IGF1dG87IGZsb2F0OiByaWdodDtcIj5cclxuICAgICAgICA8YSBocmVmPVwiL2ZpbGUvJHtmaWxlLmlkfVwiIGNsYXNzPVwiYnV0dG9uIGlzLWxpbmsgaXMtc21hbGwgaGFzLXRleHQtd2hpdGVcIiBkb3dubG9hZD1cIiR7ZmlsZS5uYW1lfVwiIHN0eWxlPVwiXCI+XHJcbiAgICAgICAgICBEb3dubG9hZFxyXG4gICAgICAgICAgPCEtLTxpIGNsYXNzPVwiZmFzIGZhLWRvd25sb2FkIGlzLWJsb2NrXCI+PC9pPi0tPlxyXG4gICAgICAgIDwvYT5cclxuICAgICAgICA8YSBvbmNsaWNrPVwiZGVzdHJveUF0dGFjaCgke2ZpbGUuaWR9LCAke2ZpbGUubGVzc29uSWR9KVwiIGNsYXNzPVwiYnV0dG9uIGlzLXNtYWxsIGlzLWRhbmdlclwiIHN0eWxlPVwiXCI+XHJcbiAgICAgICAgICBEZWxldGVcclxuICAgICAgICAgIDwhLS08aSBjbGFzcz1cImZhcyBmYS10aW1lcyBpcy1ibG9ja1wiPjwvaT4tLT5cclxuICAgICAgICA8L2E+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9saT5cclxuICAgICAgYDtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgcmV0dXJuIGFsZXJ0KGUubWVzc2FnZSB8fCBlLnRvU3RyaW5nKCkpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0TGVzc0NvbnRlbnQoKSB7XHJcbiAgY29uc3QgbGVzc29uSWQgPSBnZXRTZWxJZCgnTGVzc29uJyk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIGBmb3JtICNtb2R1bGUtZWRpdC1sZXNzb24tY29udGVudGApLmlubmVySFRNTCA9IGBcclxuICAgIDxwIGNsYXNzPVwibGVzc29uLWVkaXQtbXNnLWhhcy1sZXNzb25cIj5cclxuICAgICAgPGJyPlxyXG4gICAgICA8c3Ryb25nPk5PVEU8L3N0cm9uZz5cclxuICAgICAgPGJyPlxyXG4gICAgICBZb3UgaGF2ZSBhbHJlYWR5IHVwbG9hZGVkIGxlc3NvbiBjb250ZW50IVxyXG4gICAgICA8YnI+XHJcbiAgICAgIEZlZWwgZnJlZSB0byA8c3Ryb25nPnJlcGxhY2U8L3N0cm9uZz4gaXQgYnkgcmUtdXBsb2FkaW5nIGFub3RoZXIgZmlsZS5cclxuICAgIDwvcD5cclxuICAgIDxicj5cclxuICAgIDxhIGhyZWY9XCIvYXBpL2xlc3Nvbi8ke2xlc3NvbklkfS9kb3dubG9hZFwiXHJcbiAgICAgICBjbGFzcz1cImJ1dHRvbiBpcy1saW5rIGlzLXNtYWxsIGhhcy10ZXh0LWNlbnRlcmVkIGhhcy10ZXh0LXdoaXRlXCJcclxuICAgICAgIGRvd25sb2FkPVwibGVzc29uLmh0bWxcIj5cclxuICAgICAgPGkgY2xhc3M9XCJmYXMgZmEtZG93bmxvYWQgaWNvblwiPjwvaT5cclxuICAgICAgPHNwYW4+RG93bmxvYWQ8L3NwYW4+XHJcbiAgICA8L2E+XHJcbiAgYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSB0aGUgSFRNTCBjb250ZW50IGZpbGUgZnJvbSBhIGxlc3Nvbi5cclxuICovXHJcbmZ1bmN0aW9uIHVuc2V0TGVzc0NvbnRlbnQoKSB7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgZm9ybSAjbW9kdWxlLWVkaXQtbGVzc29uLWNvbnRlbnRgKS5pbm5lckhUTUwgPSBgXHJcbiAgICA8dWwgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcIj5cclxuICAgICAgPGxpPlxyXG4gICAgICAgIDxwPjxlbT5Pbmx5PC9lbT4gaW5jbHVkZSB0aGUgPGVtPmNvbnRlbnQ8L2VtPiBvZiB0aGUgPGNvZGU+Jmx0O2JvZHkmZ3Q7PC9jb2RlPiB0YWc8L3A+XHJcbiAgICAgIDwvbGk+XHJcbiAgICAgIDxsaT5cclxuICAgICAgICA8cD5XZSB3aWxsIG9ubHkgYWNjZXB0IDxzdHJvbmc+SFRNTDwvc3Ryb25nPiBmaWxlczwvcD5cclxuICAgICAgPC9saT5cclxuICAgIDwvdWw+XHJcbiAgYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vZGlmaWVzIGEgbW9kdWxlIGFuZCB1cGRhdGVzIFVJLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlTW9kKCkge1xyXG4gIGNvbnN0IHBhbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kdWxlLWVkaXQtcGFuZScpO1xyXG4gIGNvbnN0IG1heWJlTmFtZSA9IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LW5hbWUnKS5pbm5lclRleHQ7XHJcbiAgY29uc3QgbWF5YmVUb3BpYyA9IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXRvcGljJykuaW5uZXJUZXh0O1xyXG4gIGNvbnN0IG1heWJlU3VtbWFyeSA9IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXN1bW1hcnknKS52YWx1ZTtcclxuICBjb25zdCBtb2R1bGVJZCA9IGdldFNlbElkKCdNb2R1bGUnKTtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgdXBkYXRlKCdNb2R1bGUnLCBtb2R1bGVJZCwgSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBzdW1tYXJ5OiBtYXliZVN1bW1hcnkgPyBtYXliZVN1bW1hcnkgOiBudWxsLFxyXG4gICAgICBuYW1lOiBtYXliZU5hbWUgPyBtYXliZU5hbWUgOiBudWxsLFxyXG4gICAgICB0b3BpYzogbWF5YmVUb3BpYyA/IG1heWJlVG9waWMgOiBudWxsLFxyXG4gICAgfSkpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbW9kdWxlcz9hdXRob3JJZD0ke0pTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkSW4nKSkuaWR9YCk7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9tb2R1bGVzP2lkPSR7bW9kdWxlSWR9YCk7XHJcbiAgICAvLyBhd2FpdCB0b2dnbGVNb2R1bGUoZ2V0U2VsSWQoJ01vZHVsZScpKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zdCBtc2cgPSBlLm1zZyB8fCBlLm1lc3NhZ2UgfHwgZS50b1N0cmluZygpO1xyXG4gICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIHJldHVybiBhbGVydChtc2cpO1xyXG4gIH1cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1tb2R1bGUgbGlbZGF0YS1pZD0nJHttb2R1bGVJZH0nXSA+IGEgPiBzcGFuYCkuaW5uZXJUZXh0ID0gbWF5YmVOYW1lID8gbWF5YmVOYW1lIDogYHVubmFtZWQgJHttb2R1bGVJZH1gO1xyXG4gIHJldHVybiBhbGVydCgnVXBkYXRlZCBtb2R1bGUuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb2RpZmllcyBhIGxlc3NvbiBhbmQgdXBkYXRlcyBVSS5cclxuICpcclxuICogVE9ETyBlbnN1cmUgZmlsZSBuYW1lcyBhcmUgdW5pcXVlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlTGVzcygpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1wYW5lIGZvcm0nKTtcclxuICAgIGNvbnN0IGlkID0gZ2V0U2VsSWQoJ0xlc3NvbicpO1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGNvbnN0IGxlc3NvbklucHV0ICA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1maWxlXTpub3QoW211bHRpcGxlXSknKTtcclxuICAgIGNvbnN0IGhhc0xlc3NDb250ID0gbGVzc29uSW5wdXQuZmlsZXMubGVuZ3RoID4gMDtcclxuICAgIGlmIChoYXNMZXNzQ29udCkgIHtcclxuICAgICAgaWYgKCFsZXNzb25JbnB1dC5maWxlc1swXS5uYW1lLm1hdGNoKC9cXC54P2h0bWw/JC9pKSkge1xyXG4gICAgICAgIHJldHVybiBhbGVydCgnTGVzc29uIG11c3QgYmUgYW4gSFRNTCBmaWxlLicpO1xyXG4gICAgICB9IGVsc2UgZm9ybURhdGEuYXBwZW5kKCdsZXNzb24nLCBsZXNzb25JbnB1dC5maWxlc1swXSwgJ2xlc3Nvbi5odG1sJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdHRhY2htZW50cyA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1maWxlXVttdWx0aXBsZV0nKS5maWxlcztcclxuICAgIGZvciAoY29uc3QgZiBvZiBhdHRhY2htZW50cykge1xyXG4gICAgICBpZiAoIWYubmFtZS5tYXRjaCgvXFwuKChwbnxqcClnfGdpZnxtcFszNGddKSQvaSkpIHtcclxuICAgICAgICByZXR1cm4gYWxlcnQoYEludmFsaWQgYXR0YWNobWVudCBmaWxlIHR5cGUgJHtmLm5hbWV9LmApO1xyXG4gICAgICB9IGVsc2UgZm9ybURhdGEuYXBwZW5kKGYubmFtZSwgZik7XHJcbiAgICB9XHJcbiAgICBsZXQgbWF5YmVOYW1lID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPW5hbWVdJykudmFsdWUudHJpbSgpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCduYW1lJywgbWF5YmVOYW1lKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnc3VtbWFyeScsIGZvcm0ucXVlcnlTZWxlY3RvcigndGV4dGFyZWFbbmFtZT1zdW1tYXJ5XScpXHJcbiAgICAgIC52YWx1ZVxyXG4gICAgICAudHJpbSgpKTtcclxuICAgIC8vIERPIE5PVCBTRVQgQ09OVEVOVC1UWVBFXHJcbiAgICBjb25zb2xlLmRlYnVnKFsuLi5mb3JtRGF0YS5lbnRyaWVzKCldKTtcclxuICAgIGF3YWl0IHVwZGF0ZSgnTGVzc29uJywgaWQsIGZvcm1EYXRhLCBudWxsKTtcclxuICAgIGlmIChoYXNMZXNzQ29udCkgc2V0TGVzc0NvbnRlbnQoaWQpO1xyXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoQXJyYXkuZnJvbShhdHRhY2htZW50cykubWFwKGYgPT4gYXBwZW5kQXR0YWNobWVudCh7aWQ6IGYuaWQsIG5hbWU6IGYubmFtZSwgbGVzc29uSWQ6IGlkfSkpKTtcclxuICAgIGNvbnN0IG1vZHVsZUlkID0gZ2V0U2VsSWQoJ01vZHVsZScpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbGVzc29ucz9pZD0ke2lkfSZtb2R1bGVJZD0ke21vZHVsZUlkfWApO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbGVzc29ucz9pZD0ke2lkfWApO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbGVzc29ucz9tb2R1bGVJZD0ke21vZHVsZUlkfWApO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vZmlsZXM/bGVzc29uSWQ9JHtpZH1gKTtcclxuICAgIG1heWJlTmFtZSA9IGZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1uYW1lXScpLnZhbHVlLnRyaW0oKTtcclxuICAgIC8vIGEgd2F5IHRvIGNsZWFyIGZpbGVzXHJcbiAgICBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9ZmlsZV1bbXVsdGlwbGVdJykub3V0ZXJIVE1MID0gYFxyXG4gICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBuYW1lPVwiYXR0YWNobWVudHNcIiBjbGFzcz1cImlzLXBhZGRpbmdsZXNzXCIgbXVsdGlwbGUgc3R5bGU9XCJkaXNwbGF5OiBibG9ja1wiPlxyXG4gICAgYDtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtb2R1bGUtZWRpdC1saXN0LWxlc3NvbiBsaVtkYXRhLWlkPScke2lkfSddID4gYSA+IHNwYW5gKS5pbm5lclRleHQgPSBtYXliZU5hbWUgPyBtYXliZU5hbWUgOiBgdW5uYW1lZCAke2lkfWA7XHJcbiAgICByZXR1cm4gYWxlcnQoJ1VwZGF0ZWQgbGVzc29uLicpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICByZXR1cm4gYWxlcnQoZS5tc2cgfHwgZS5tZXNzYWdlIHx8IGUudG9TdHJpbmcoKSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVE9ETyBNb2RpZmllcyBhIHF1ZXN0aW9uIGFuZCB1cGRhdGVzIFVJLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUXVlc3QoKSB7XHJcbiAgY29uc3QgaWQgPSBnZXRTZWxJZCgnUXVlc3Rpb24nKTtcclxuICBjb25zdCBtb2R1bGVJZCA9IGdldFNlbElkKCdNb2R1bGUnKTtcclxuICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9xdWVzdGlvbnM/bW9kdWxlSWQ9JHttb2R1bGVJZH1gKTtcclxuICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9xdWVzdGlvbnM/aWQ9JHtpZH0mbW9kdWxlSWQ9JHttb2R1bGVJZH1gKTtcclxuICBjb25zdCBwYW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXBhbmUnKTtcclxuICBjb25zdCBtYXliZU5hbWUgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1xdWVzdGlvbi1uYW1lJykuaW5uZXJUZXh0O1xyXG4gIGNvbnN0IG1heWJlQSA9IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXF1ZXN0aW9uLWFuc3dlcicpLmlubmVyVGV4dDtcclxuICBjb25zdCBtYXliZUJhZEExID0gcGFuZS5xdWVyeVNlbGVjdG9yKCcjbW9kdWxlLWVkaXQtcXVlc3Rpb24tYmFkLWFuc3dlci0xJykuaW5uZXJUZXh0O1xyXG4gIGNvbnN0IG1heWJlQmFkQTIgPSBwYW5lLnF1ZXJ5U2VsZWN0b3IoJyNtb2R1bGUtZWRpdC1xdWVzdGlvbi1iYWQtYW5zd2VyLTInKS5pbm5lclRleHQ7XHJcbiAgY29uc3QgbWF5YmVCYWRBMyA9IHBhbmUucXVlcnlTZWxlY3RvcignI21vZHVsZS1lZGl0LXF1ZXN0aW9uLWJhZC1hbnN3ZXItMycpLmlubmVyVGV4dDtcclxuICBhd2FpdCB1cGRhdGUoJ1F1ZXN0aW9uJywgaWQsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgIGlkLFxyXG4gICAgbW9kdWxlSWQsXHJcbiAgICBuYW1lOiBtYXliZU5hbWUgPyBtYXliZU5hbWUgOiBudWxsLFxyXG4gICAgYmFkQW5zd2VyMTogbWF5YmVCYWRBMSA/IG1heWJlQmFkQTEgOiBudWxsLFxyXG4gICAgYmFkQW5zd2VyMjogbWF5YmVCYWRBMiA/IG1heWJlQmFkQTIgOiBudWxsLFxyXG4gICAgYmFkQW5zd2VyMzogbWF5YmVCYWRBMyA/IG1heWJlQmFkQTMgOiBudWxsLFxyXG4gICAgY29ycmVjdEFuc3dlcjogbWF5YmVBID8gbWF5YmVBIDogbnVsbCxcclxuICB9KSk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtcXVlc3Rpb24gbGlbZGF0YS1pZD0nJHtpZH0nXSA+IGEgPiBzcGFuYCkuaW5uZXJUZXh0ID0gbWF5YmVOYW1lID8gbWF5YmVOYW1lIDogYHVubmFtZWQgIyR7aWR9YDtcclxuICByZXR1cm4gYWxlcnQoJ1VwZGF0ZWQgcXVlc3Rpb24uJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXN0cm95cyBhIG1vZHVsZS5cclxuICpcclxuICogQHBhcmFtIHshTnVtYmVyfSBpZFxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cclxuZnVuY3Rpb24gZGVzdHJveU1vZChpZCkge1xyXG4gIGRlc3Ryb3koJ01vZHVsZScsIGlkKTtcclxuICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9tb2R1bGVzP2F1dGhvcklkPSR7SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRJbicpKS5pZH1gKTtcclxuICBpZiAoZ2V0U2VsSWQoJ01vZHVsZScpID09PSBpZCkge1xyXG4gICAgY2xlYXJQYW5lKCk7XHJcbiAgICBjbGVhckxpc3QoJ0xlc3NvbicpO1xyXG4gICAgY2xlYXJMaXN0KCdRdWVzdGlvbicpO1xyXG4gIH1cclxuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtbW9kdWxlIGxpW2RhdGEtaWQ9JyR7aWR9J11gKS5yZW1vdmUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlc3Ryb3lzIGEgbGVzc29uLlxyXG4gKlxyXG4gKiBAcGFyYW0geyFOdW1iZXJ9IGlkXHJcbiAqIEByZXR1cm4ge1Byb21pc2U8dm9pZHwhU3RyaW5nPn1cclxuICovXHJcbmZ1bmN0aW9uIGRlc3Ryb3lMZXNzKGlkKSB7XHJcbiAgY29uc3QgbXNnUHJvbSA9IGRlc3Ryb3koJ0xlc3NvbicsIGlkKTtcclxuICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKGAke2xvY2F0aW9uLnBhdGhuYW1lfS9sZXNzb25zP21vZHVsZUlkPSR7Z2V0U2VsSWQoJ01vZHVsZScpfWApO1xyXG4gIGlmIChnZXRTZWxJZCgnTGVzc29uJykgPT09IGlkKSBjbGVhclBhbmUoKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1sZXNzb24gbGlbZGF0YS1pZD0nJHtpZH0nXWApLnJlbW92ZSgpO1xyXG4gIHJldHVybiBtc2dQcm9tO1xyXG59XHJcblxyXG4vKipcclxuICogRGVzdHJveXMgYSBxdWVzdGlvbi5cclxuICpcclxuICogQHBhcmFtIHshTnVtYmVyfSBpZFxyXG4gKiBAcmV0dXJuIHt2b2lkfVxyXG4gKi9cclxuZnVuY3Rpb24gZGVzdHJveVF1ZXN0KGlkKSB7XHJcbiAgZGVzdHJveSgnUXVlc3Rpb24nLCBpZCk7XHJcbiAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vcXVlc3Rpb25zP21vZHVsZUlkPSR7Z2V0U2VsSWQoJ01vZHVsZScpfWApO1xyXG4gIGlmIChnZXRTZWxJZCgnUXVlc3Rpb24nKSA9PT0gaWQpIGNsZWFyUGFuZSgpO1xyXG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1xdWVzdGlvbiBsaVtkYXRhLWlkPScke2lkfSddYCkucmVtb3ZlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXN0cm95cyBhbiBhdHRhY2htZW50IChmaWxlKS5cclxuICpcclxuICogQHBhcmFtIHt7aWQ6ICFOdW1iZXIsIGxlc3NvbklkOiAhTnVtYmVyfX0gZmlsZVxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWR8IVN0cmluZz59XHJcbiAqL1xyXG5mdW5jdGlvbiBkZXN0cm95QXR0YWNoKGlkLCBsZXNzb25JZCkge1xyXG4gIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oYCR7bG9jYXRpb24ucGF0aG5hbWV9L2ZpbGVzP2xlc3NvbklkPSR7bGVzc29uSWR9YCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtYXR0YWNobWVudHMgbGlbZGF0YS1pZD0nJHtpZH0nXWApLnJlbW92ZSgpO1xyXG4gIC8vIGNsZWFyIGNhY2hlXHJcbiAgcmV0dXJuIGRlc3Ryb3koJ0ZpbGUnLCBpZCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbW9kdWxlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LWJ0bi1tb2R1bGUtY3JlYXRlJykub25jbGljayA9IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1vZChlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGF1dGhvcklkID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRJbicpKS5pZDtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbW9kdWxlID0gY3JlYXRlKCdNb2R1bGUnLCBKU09OLnN0cmluZ2lmeSh7YXV0aG9ySWR9ICkpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbW9kdWxlcz9hdXRob3JJZD0ke2F1dGhvcklkfWApO1xyXG4gICAgcmV0dXJuIGFwcGVuZE1vZHVsZShhd2FpdCBtb2R1bGUpO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICBhbGVydCgnWW91ciBzZXNzaW9uIGV4cGlyZWQuJyk7XHJcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIGxlc3Nvbi5cclxuICpcclxuICogQHJldHVybiB7UHJvbWlzZTx2b2lkPn1cclxuICovXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2R1bGUtZWRpdC1idG4tbGVzc29uLWNyZWF0ZScpLm9uY2xpY2sgPSBhc3luYyBmdW5jdGlvbiBjcmVhdGVMZXNzKGUpIHtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgbW9kdWxlSWQgPSBnZXRTZWxJZCgnTW9kdWxlJyk7XHJcbiAgaWYgKCFtb2R1bGVJZCkgcmV0dXJuIGFsZXJ0KCdNb2R1bGUgbXVzdCBiZSBzZWxlY3RlZC4nKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbGVzc29uID0gY3JlYXRlKCdMZXNzb24nLCBKU09OLnN0cmluZ2lmeSh7bW9kdWxlSWR9ICkpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vbGVzc29ucz9tb2R1bGVJZD0ke21vZHVsZUlkfWApO1xyXG4gICAgcmV0dXJuIGFwcGVuZExlc3Nvbihhd2FpdCBsZXNzb24pO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICBhbGVydCgnWW91ciBzZXNzaW9uIGV4cGlyZWQuJyk7XHJcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHF1ZXN0aW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxyXG4gKi9cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LWJ0bi1xdWVzdGlvbi1jcmVhdGUnKS5vbmNsaWNrID0gYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVlc3QoZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBtb2R1bGVJZCA9IGdldFNlbElkKCdNb2R1bGUnKTtcclxuICBpZiAoIW1vZHVsZUlkKSByZXR1cm4gYWxlcnQoJ01vZHVsZSBtdXN0IGJlIHNlbGVjdGVkLicpO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxdWVzdGlvbiA9IGNyZWF0ZSgnUXVlc3Rpb24nLCBKU09OLnN0cmluZ2lmeSh7bW9kdWxlSWR9ICkpO1xyXG4gICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0vcXVlc3Rpb25zP21vZHVsZUlkPSR7bW9kdWxlSWR9YCk7XHJcbiAgICByZXR1cm4gYXBwZW5kUXVlc3Rpb24oYXdhaXQgcXVlc3Rpb24pO1xyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICBhbGVydCgnWW91ciBzZXNzaW9uIGV4cGlyZWQuJyk7XHJcbiAgICBsb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUG9wdWxhdGUgdGhlIHBhZ2UgdXNpbmcgQUpBWC5cclxuICpcclxuICogVHJ5IHRvIHJlY2FsbCBsYXN0IGNsaWNrLlxyXG4gKi9cclxuKGFzeW5jIGZ1bmN0aW9uKCkge1xyXG4gIHRyeSB7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXNwaW5uZXItbGlzdC1tb2R1bGUnKS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1pbnZpc2libGUnKTtcclxuXHJcbiAgICBjb25zdCBsb2dnZWRJbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZEluJyk7XHJcblxyXG4gICAgaWYgKCFsb2dnZWRJbikgcmV0dXJuIGxvZ091dCgpO1xyXG5cclxuICAgIGF3YWl0IGdldCgnTW9kdWxlJywge2F1dGhvcklkOiBKU09OLnBhcnNlKGxvZ2dlZEluKS5pZH0pLnRoZW4obXMgPT4gUHJvbWlzZS5hbGwobXMubWFwKG0gPT4gYXBwZW5kTW9kdWxlKG0pKSkpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXNwaW5uZXItbGlzdC1tb2R1bGUnKS5jbGFzc0xpc3QuYWRkKCdpcy1pbnZpc2libGUnKTtcclxuXHJcbiAgICByZXR1cm47XHJcblxyXG4gICAgLy8gY29uc3QgbWVtb3J5ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShgJHtsb2NhdGlvbi5wYXRobmFtZX0/Y2xpY2tgKTtcclxuICAgIC8vIGlmICghbWVtb3J5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyBjb25zdCB7cGFnZSwgaWR9ID0gSlNPTi5wYXJzZShtZW1vcnkpO1xyXG4gICAgLy9cclxuICAgIC8vIC8qKlxyXG4gICAgLy8gICogQHJldHVybiB7UHJvbWlzZTxCb29sZWFuPn1cclxuICAgIC8vICAqL1xyXG4gICAgLy8gYXN5bmMgZnVuY3Rpb24gdHJ5UmVjYWxsTW9kKCkge1xyXG4gICAgLy8gICBpZiAocGFnZSAhPT0gJ21vZHVsZScpIHtcclxuICAgIC8vICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgIH0gZWxzZSBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtb2R1bGUtZWRpdC1saXN0LW1vZHVsZSBsaVtkYXRhLWlkPScke0pTT04ucGFyc2UobWVtb3J5KS5pZH0nXSA+IGFgKSkge1xyXG4gICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBhd2FpdCB0b2dnbGVNb2R1bGUoSlNPTi5wYXJzZShtZW1vcnkpLmlkKTtcclxuICAgIC8vICAgcmV0dXJuIHRydWU7XHJcbiAgICAvLyB9XHJcbiAgICAvL1xyXG4gICAgLy8gLyoqXHJcbiAgICAvLyAgKiBAcmV0dXJuIHtQcm9taXNlPEJvb2xlYW4+fVxyXG4gICAgLy8gICovXHJcbiAgICAvLyBhc3luYyBmdW5jdGlvbiB0cnlSZWNhbGxMZXNzKCkge1xyXG4gICAgLy8gICBpZiAocGFnZSAhPT0gJ2xlc3NvbicpIHJldHVybiBmYWxzZTtcclxuICAgIC8vICAgY29uc3QgbHMgPSBhd2FpdCBnZXQoJ0xlc3NvbicsIHtpZH0pO1xyXG4gICAgLy8gICBpZiAobHMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgIGNvbnN0IHttb2R1bGVJZH0gPSBsc1swXTtcclxuICAgIC8vICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1tb2R1bGUgbGlbZGF0YS1pZD0nJHttb2R1bGVJZH0nXSA+IGFgKSkge1xyXG4gICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBhd2FpdCB0b2dnbGVNb2R1bGUobW9kdWxlSWQpO1xyXG4gICAgLy8gICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNtb2R1bGUtZWRpdC1saXN0LWxlc3NvbiBsaVtkYXRhLWlkPScke2lkfSddID4gYWApKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGF3YWl0IHRvZ2dsZUxlc3NvbihpZCk7XHJcbiAgICAvLyAgIHJldHVybiB0cnVlO1xyXG4gICAgLy8gfVxyXG4gICAgLy9cclxuICAgIC8vIC8qKlxyXG4gICAgLy8gICogQHJldHVybiB7UHJvbWlzZTxCb29sZWFuPn1cclxuICAgIC8vICAqL1xyXG4gICAgLy8gYXN5bmMgZnVuY3Rpb24gdHJ5UmVjYWxsUXVlc3QoKSB7XHJcbiAgICAvLyAgIGlmIChwYWdlICE9PSAncXVlc3Rpb24nKSByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgIGNvbnN0IHFzID0gYXdhaXQgZ2V0KCdRdWVzdGlvbicsIHtpZH0pO1xyXG4gICAgLy8gICBpZiAocXMubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgIGNvbnN0IG1vZHVsZUlkID0gcXNbMF0ubW9kdWxlSWQ7XHJcbiAgICAvLyAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI21vZHVsZS1lZGl0LWxpc3QtbW9kdWxlIGxpW2RhdGEtaWQ9JyR7bW9kdWxlSWR9J10gPiBhYCkpIHtcclxuICAgIC8vICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgYXdhaXQgdG9nZ2xlTW9kdWxlKG1vZHVsZUlkKTtcclxuICAgIC8vICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjbW9kdWxlLWVkaXQtbGlzdC1xdWVzdGlvbiBsaVtkYXRhLWlkPScke2lkfSddID4gYWApKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGF3YWl0IHRvZ2dsZVF1ZXN0aW9uKGlkKTtcclxuICAgIC8vICAgcmV0dXJuIHRydWU7XHJcbiAgICAvLyB9XHJcbiAgICAvL1xyXG4gICAgLy8gcmV0dXJuIChhd2FpdCB0cnlSZWNhbGxNb2QoKSkgfHwgKChhd2FpdCB0cnlSZWNhbGxMZXNzKCkpIHx8IGF3YWl0IHRyeVJlY2FsbFF1ZXN0KCkpO1xyXG4gIH0gY2F0Y2goZSkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZHVsZS1lZGl0LXNwaW5uZXItbGlzdC1tb2R1bGUnKS5jbGFzc0xpc3QuYWRkKCdpcy1pbnZpc2libGUnKTtcclxuICAgIGNvbnN0IG1zZyA9IGUubXNnIHx8IGUubWVzc2FnZSB8fCBlLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgcmV0dXJuIGFsZXJ0KG1zZylcclxuICB9XHJcbiAgLy8gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImxpW2RhdGEtaWRdOm5vdChbY2xhc3MqPSdoYXMtYmFja2dyb3VuZC1saWdodCddKVwiKS5mb3JFYWNoKGVsID0+IHtcclxuICAvLyAgIGVsLm9ubW91c2VvdmVyID0gKCkgPT4gZWwuY2xhc3NMaXN0LmFkZCgnaGFzLWJhY2tncm91bmQtbGlnaHQnKTtcclxuICAvLyAgIGVsLm9ubW91c2VvdXQgPSAoKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtYmFja2dyb3VuZC1saWdodCcpO1xyXG4gIC8vIH0pO1xyXG59KSgpO1xyXG4iXX0=