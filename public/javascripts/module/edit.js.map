{"version":3,"sources":["edit.js"],"names":["select","what","id","document","querySelector","toLowerCase","classList","add","unSelect","maybe","remove","saveClick","sessionStorage","setItem","location","pathname","JSON","stringify","page","clearList","getElementById","innerHTML","clearPane","getSelId","eval","getAttribute","showModEditPane","module","topics","name","topic","map","t","authorId","get","then","us","email","moduleId","rs","r","stars","n","length","reduce","l","summary","console","error","alert","msg","message","toString","showLessEditPane","lesson","attachments","content","setLessContent","unsetLessContent","Promise","all","f","appendAttachment","lessonId","showQuestEditPane","question","correctAnswer","badAnswer1","badAnswer2","badAnswer3","saveProgress","pane","questionId","vars","parse","getItem","innerText","trim","value","toggleModule","focusedMod","querySelectorAll","forEach","li","setAttribute","lessP","ls","appendLesson","QuestP","qs","q","appendQuestion","removeAttribute","ms","toggleLesson","focusedLessId","toggleQuestion","appendModule","modEl","createElement","appendChild","lessonEl","questEl","file","fs","list","updateMod","maybeName","maybeTopic","maybeSummary","update","removeItem","updateLess","form","formData","FormData","lessonInput","hasLessCont","files","match","append","debug","entries","Array","from","outerHTML","updateQuest","maybeA","maybeBadA1","maybeBadA2","maybeBadA3","destroyMod","destroy","destroyLess","msgProm","destroyQuest","destroyAttach","onclick","e","preventDefault","create","loggedIn","logOut","m"],"mappings":"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","sourcesContent":["/**\n * Select (highlight) a list item.\n *\n * @param {'Module'|'Lesson'|'Question'} what\n * @param {!Number} id\n */\nfunction select(what, id) {\n  return document.querySelector(`#module-edit-list-${what.toLowerCase()} li[data-id='${id}']`).classList.add('has-background-light');\n}\n\n/**\n * Un-Select (un-highlights) a list item.\n *\n * @param {'Module'|'Lesson'|'Question'} what\n */\nfunction unSelect(what) {\n  const maybe = document.querySelector(`#module-edit-list-${what.toLowerCase()} li[class*=has-background-light]`);\n  if (maybe) maybe.classList.remove('has-background-light');\n}\n\n/**\n * Saves the last click. (this is recalled later)\n *\n * @param {'Module'|'Lesson'|'Question'} what\n * @param {!Number} id\n */\nfunction saveClick(what, id) {\n  return sessionStorage.setItem(`${location.pathname}?click`, JSON.stringify({page: what.toLowerCase(), id}));\n}\n\n/**\n * Clears a list.\n *\n * @param {'Module'|'Lesson'|'Question'} what\n */\nfunction clearList(what) {\n  return document.getElementById(`module-edit-list-${what.toLowerCase()}`).innerHTML = '';\n}\n\n/**\n * Clears the edit pane.\n */\nfunction clearPane() {\n  return document.getElementById('module-edit-pane').innerHTML = '';\n}\n\n/**\n * Gets the id of selected.\n *\n * @param {'Module'|'Lesson'|'Question'} what\n * @return {?Number}\n */\nfunction getSelId(what) {\n  const maybe = document.querySelector(`#module-edit-list-${what.toLowerCase()} li[class*=has-background-light]`);\n  return maybe ? eval(maybe.getAttribute('data-id')) : null;\n}\n\n/**\n * Shows the lesson edit pane.\n *\n * @param {!{id: !Number, name: ?String, authorId: !Number, topic: ?String, summary: ?String}} module\n * @param {!Array<!String>} topics\n * @return {Promise<void>}\n */\nasync function showModEditPane(module, topics = [ 'AI', 'Anthropology', 'Archeology', 'Architecture', 'Arts', 'Biology', 'Chemistry', 'Computer Science', 'Design', 'Drama', 'Economics', 'Engineering', 'Geography', 'History', 'Humanities', 'Languages', 'Law', 'Linguistics', 'Literature', 'Mathematics', 'Medicine', 'Philosophy', 'Physics', 'Political Science', 'Psychology', 'Sciences', 'Social Sciences', 'Sociology', 'Theology']) {\n  try {\n    document.getElementById('module-edit-pane').innerHTML = `\n      <div class=\"animate-ease-in\">\n        <h2 class=\"title\" style=\"margin-bottom: 10px;\">\n          Name\n        </h2>\n        \n        <div id=\"module-edit-name\" \n             contenteditable=\"true\" \n             style=\"border-radius: 18px; border: none; padding-top: 5px; padding-bottom: 5px; padding-left: 10px; font-size: 1.2rem;\" class=\"has-background-light\">\n          ${module.name ? module.name : ''}\n        </div>\n        <h3 class=\"subtitle\" style=\"margin: 25px 0 0 0;\">\n          Topic\n        </h3>\n        <div class=\"dropdown\" \n             onmouseover=\"this.classList.add('is-active')\"\n             onmouseout=\"this.classList.remove('is-active')\">\n          <div class=\"dropdown-trigger\">\n            <button class=\"button has-background-light\" aria-haspopup=\"true\" aria-controls=\"dropdown-menu\" style=\"border: none;\">\n              <span id=\"module-edit-topic\" style=\"min-width: 150px;\">${module.topic ?\n        module.topic :\n        ''}</span>\n              <span class=\"icon is-small\">\n                <i class=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n              </span>\n            </button>\n          </div>\n          <div class=\"dropdown-menu\" id=\"dropdown-menu\" role=\"menu\" style=\"margin-bottom: 30px;\">\n            <div class=\"dropdown-content\">\n              ${topics.map(\n        t => \"<a class='dropdown-item' onclick='document.getElementById(\\\"module-edit-topic\\\").innerText = this.innerText.trim()'>\" +\n          t + \"</a>\")}\n              <hr class=\"dropdown-divider\">\n              <span class=\"dropdown-item\" style=\"font-weight: bold;\">\n                Other\n              </span>\n              <a class=\"dropdown-item\" \n                 onmouseout=\"document.getElementById('module-edit-topic').innerText = this.innerText.trim()\" \n                 id=\"module-edit-topic-other\" \n                 contenteditable=\"true\"\n                 style=\"margin: 5px 10px; max-width: 90%;\">\n                ${module.topic ? module.topic : ''}\n              </a>\n            </div>\n          </div>\n        </div>\n        <section class=\"content\" style=\"margin-top: 40px;\">\n          <strong>Author</strong>   \n          <a href=\"/user/${module.authorId}\">\n            ${await get('User', {id: module.authorId}).then(us => us[0].email)}\n          </a>\n          <br>\n          <strong>Rating</strong> <span id=\"module-edit-rating\">${await get(\n        'Rating', {moduleId: module.id})\n        .then(rs => rs.map(r => r.stars))\n        .then(rs => {\n                      const n = rs.length;\n                      return n > 0 ? rs.reduce((l, r) => l + r) / n : 0;\n                      })}/5</span>\n        </section>\n        <section class=\"is-medium\" style=\"margin-bottom: 30px;\">\n          <h2 class=\"title is-medium\" style=\"margin-bottom: 10px;\">Summary</h2>\n          <textarea id=\"module-edit-summary\"\n                    style=\"word-wrap: break-word;\">${module.summary ? module.summary : ''}</textarea>\n        </section>\n        <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button type=\"reset\" onclick=\"alert('Not Implemented Yet.')\" class=\"button is-warning is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Reset</span>\n            </button>\n          </div>\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button type=\"submit\" onclick=\"updateMod()\" class=\"button is-success is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Save</span>\n            </button>\n          </div>\n          <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n            <button onclick=\"if (confirm('Delete module?')) destroyMod(${module.id})\" class=\"button is-danger is-block\" style=\"margin: 7px auto; width: 100%;\">\n              <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n              <span>Delete</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    `;\n  } catch (e) {\n    console.error(e);\n    return alert(e.msg || e.message || e.toString());\n  }\n}\n\n/**\n * Shows the lesson edit pane.\n *\n * @param {{id: !Number, moduleId: !Number, name: ?String, content: ?Boolean, summary: ?String}} lesson\n * @param {Array<{id: ?Number, name: !String}>} attachments\n */\nasync function showLessEditPane(lesson, attachments = []) {\n  document.getElementById('module-edit-pane').innerHTML = `\n    <form enctype=\"multipart/form-data\"\n          id=\"module-edit-form-lesson\"\n          disabled=\"true\"\n          class=\"lesson-edit-form column is-10-desktop is-full-tablet is-full-mobile animate-ease-in\"\n          style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: -15px;\">\n      <h2 class=\"title is-3\">Name</h2>\n      <input name=\"name\" value=\"${lesson.name ? lesson.name : ''}\" \n             class=\"has-background-light\"\n             autocomplete=\"on\" placeholder=\"e.g. Introduction to AI\"\n             style=\"padding: 5px 10px; border: none; border-radius: 18px; font-size: 1.2rem;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Summary</h2>\n      <textarea name=\"summary\" autocomplete=\"on\"\n                class=\"has-background-light\"\n                style=\"padding: 5px; min-height: 50px; max-height: 400px; border: none; border-radius: 18px;\">${lesson.summary ? lesson.summary : ''}</textarea>\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Content</h2>\n      <p style=\"margin-bottom: 10px;\">Upload HTML file with the lesson content</p>\n      <div id=\"module-edit-lesson-content\"></div>\n      <input type=\"file\" name=\"lesson\" class=\"is-paddingless\" style=\"margin-top: 20px;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Attachments (optional)</h2>\n      <p><strong>Select a file:</strong></p>\n      <br>\n      <ul style=\"list-style-type: disc; display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-left: 19px;\">\n        <li>Image (.jpg, .jpeg, .png, .gif)</li>\n        <li>Audio (.mp3)</li>\n        <li>Video (.mp4, .mpg)</li>\n      </ul>\n      <br>\n      <input type=\"file\" name=\"attachments\" class=\"is-paddingless\" multiple style=\"display: block\">\n      <div style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: 20px; width: 100%;\">\n        <h3 id=\"lesson-edit-h-uploaded-files title is-5\" style=\"margin-bottom: 8px;\">\n          Uploaded Files\n        </h3>\n        <ul id=\"module-edit-list-attachments\" style=\"display: flex; flex-direction: column; justify-content: flex-start; align-items: flex-start; width: 100%;\"></ul>\n      </div>\n      <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"alert('Not Implemented Yet.')\" type=\"reset\" class=\"button is-block is-warning\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Reset</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"event.preventDefault(); updateLess()\" class=\"button is-block is-success\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Save</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"event.preventDefault(); if (confirm('Delete lesson?')) destroyLess(${lesson.id})\" class=\"button is-block is-danger\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Delete</span>\n          </button>\n        </div>\n      </div>\n    </form>\n    `;\n\n  if (lesson.content) setLessContent();\n  else unsetLessContent();\n\n  return await Promise.all(attachments.map(f => appendAttachment({id: f.id, lessonId: lesson.id, name: f.name})));\n}\n\n/**\n * Shows the question edit pane.\n *\n * @param {{id: !Number, moduleId: !Number, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question\n */\nfunction showQuestEditPane(question) {\n  document.getElementById('module-edit-pane').innerHTML = `\n    <div class=\"animate-ease-in\">\n      <h1 class=\"title is-3\" style=\"margin-bottom: 10px;\">Question</h1>\n      <p><strong>Note:</strong> Save the current question before editing another one</p>\n      <br>\n      <a id=\"module-edit-question-name\" class=\"button is-light has-background-light is-block has-text-left\" contenteditable=\"true\" style=\"padding: 3px 15px\">\n        ${question.name ? question.name : ''}\n      </a>\n      <br>\n\n      <h2 class=\"title is-3\" style=\"margin-bottom: 10px;\">Correct Answer</h2>\n      <a id=\"module-edit-question-answer\" class=\"button is-light is-block has-text-left\" contenteditable=\"true\" style=\"padding: 3px 15px;\">\n        ${question.correctAnswer ? question.correctAnswer : ''}\n      </a>\n      \n      <h3 class=\"title is-3\" style=\"margin: 30px 0 10px 0;\">Other Answers</h3>\n\n      <p><strong>Note:</strong> Include other answers which are wrong</p>\n\n      <br>\n\n      <a id=\"module-edit-question-bad-answer-1\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ${question.badAnswer1 ? question.badAnswer1 : ''}\n      </a>\n\n      <a id=\"module-edit-question-bad-answer-2\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ${question.badAnswer2 ? question.badAnswer2 : ''}\n      </a>\n      \n      <a id=\"module-edit-question-bad-answer-3\" class=\"button is-light has-text-left\" contenteditable=\"true\" style=\"width: 100%; padding: 3px 15px; margin-bottom: 20px;\">\n        ${question.badAnswer3 ? question.badAnswer3 : ''}\n      </a>\n      \n      <div class=\"columns is-center is-multiline is-narrow\" style=\"max-width: 400px; margin-left: auto; margin-right: auto;\">\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button type=\"reset\" onclick=\"alert('Not Implemented Yet.')\" class=\"button is-block is-warning\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-undo\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Reset</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button type=\"submit\" onclick=\"updateQuest()\" class=\"button is-block is-success\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-check\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Save</span>\n          </button>\n        </div>\n        <div class=\"is-block column is-4-fullhd is-4-desktop is-4-tablet is-12-mobile\">\n          <button onclick=\"if (confirm('Delete question?')) destroyQuest(${question.id})\" class=\"button is-block is-danger\" style=\"margin: 7px auto; width: 100%;\">\n            <i class=\"fas fa-times\" style=\"position: relative; top: 4px; left: 2px;\"></i>\n            <span>Delete</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Memorize the changes made to the input (or contenteditable) fields.\n */\nfunction saveProgress() {\n  const pane = document.getElementById('module-edit-pane');\n  const moduleId = getSelId('Module');\n  const lessonId = getSelId('Lesson');\n  const questionId = getSelId('Question');\n  if (moduleId && lessonId && !questionId) {\n    // TODO saveProgress for lesson\n  } else if (moduleId && !lessonId && questionId) {\n    if (!pane.querySelector('#module-edit-question-answer')) return;\n    const vars = JSON.stringify([{\n      authorId: JSON.parse(sessionStorage.getItem('loggedIn')).id,\n      badAnswer1 : pane.querySelector('#module-edit-question-bad-answer-1').innerText.trim(),\n      badAnswer2 : pane.querySelector('#module-edit-question-bad-answer-2').innerText.trim(),\n      badAnswer3 : pane.querySelector('#module-edit-question-bad-answer-3').innerText.trim(),\n      correctAnswer : pane.querySelector('#module-edit-question-answer').innerText.trim(),\n      name : pane.querySelector('#module-edit-question-name').innerText.trim(),\n    }]);\n    sessionStorage.setItem(`${location.pathname}/questions?id=${questionId}`, vars);\n    return sessionStorage.setItem(`${location.pathname}/questions?id=${questionId}&moduleId=${moduleId}`, vars);\n  } else if (moduleId && !lessonId && !questionId) {\n    if (!pane.querySelector('#module-edit-name')) return;\n    return sessionStorage.setItem(`${location.pathname}/modules?id=${moduleId}`,\n      JSON.stringify([{\n        name: pane.querySelector('#module-edit-name').innerText.trim(),\n        topic: pane.querySelector('#module-edit-topic').innerText.trim(),\n        authorId: JSON.parse(sessionStorage.getItem('loggedIn')).id,\n        summary: pane.querySelector('#module-edit-summary').value.trim(),\n      }]));\n  }\n}\n\n/**\n * Toggle module. Run when a module is pressed. Shows the module-edit pane.\n *\n * @param {!Number} id\n * @return {Promise<void>}\n */\nasync function toggleModule(id) {\n  if (!document.querySelector(`#module-edit-list-module > li[data-id='${id}']`)) return;\n  saveClick('Module', id);\n  saveProgress();\n  const focusedMod = getSelId('Module');\n\n  if (focusedMod === id && !getSelId('Lesson') && !getSelId('Question')) {\n    // re-select *the same* module - do nothing\n    return;\n  } // else\n\n  document.querySelectorAll(`#module-edit-list-module > li[data-id]`).forEach(li => li.setAttribute('disabled', 'true'));\n\n  document.getElementById('module-edit-pane').innerHTML = `\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>`;\n  unSelect('Lesson');\n  unSelect('Question');\n\n  if (focusedMod !== id) {\n    // selected *different* module\n    unSelect('Module');\n    select('Module', id);\n    clearList('Lesson');\n    clearList('Question');\n    document.getElementById('module-edit-spinner-list-lesson').classList.remove('is-invisible');\n    document.getElementById('module-edit-spinner-list-question').classList.remove('is-invisible');\n    const lessP = get('Lesson', {moduleId: id})\n      .then(ls => Promise.all(ls.map(l => appendLesson(l))));\n    const QuestP = get('Question', {moduleId: id})\n      .then(qs => Promise.all(qs.map(q => appendQuestion(q))));\n    await lessP;\n    await QuestP;\n    document.getElementById('module-edit-spinner-list-lesson').classList.add('is-invisible');\n    document.getElementById('module-edit-spinner-list-question').classList.add('is-invisible');\n  }\n\n  document.querySelectorAll(`#module-edit-list-module > li`).forEach(li => li.removeAttribute('disabled'));\n  return showModEditPane(await get('Module', {id}).then(ms => ms[0]));\n}\n\n/**\n * Toggle module. Run when a module is pressed. Shows the module-edit pane.\n *\n * @param {!Number} id\n * @return {Promise<void>}\n */\nasync function toggleLesson(id) {\n  if (!document.querySelector(`#module-edit-list-lesson > li[data-id='${id}']`)) return;\n  const focusedLessId = getSelId('Lesson');\n  if (id === focusedLessId) return;\n  document.querySelectorAll('#module-edit-list-lesson > li[data-id]').forEach(li => li.setAttribute('disabled', 'true'));\n  document.getElementById('module-edit-pane').innerHTML = `\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>`;\n  saveClick('Lesson', id);\n  saveProgress();\n  unSelect(focusedLessId === null ? 'Question' : 'Lesson');\n  select('Lesson', id);\n  const lesson = (await get('Lesson', {id, moduleId: getSelId('Module')}))[0];\n  document.querySelectorAll('#module-edit-list-lesson > li[data-id]').forEach(li => li.removeAttribute('disabled'));\n  return await showLessEditPane(lesson, await get('File', {lessonId: lesson.id}));\n}\n\n/**\n * Toggle question. Run when a question is pressed. Shows the question-edit pane.\n *\n * @param {!Number} id\n * @return {Promise<void>}\n */\nasync function toggleQuestion(id) {\n  if (!document.querySelector(`#module-edit-list-question > li[data-id='${id}']`)) return;\n  if (id === getSelId('Question')) return;\n  document.querySelectorAll('#module-edit-list-question > li[data-id]').forEach(li => li.setAttribute('disabled', 'true'));\n  document.getElementById('module-edit-pane').innerHTML = `\n    <p class=\"has-text-centered\" style=\"margin: 10px auto;\">\n      <span style=\"margin-bottom: 15px;\">Loading</span>\n      <br>\n      <i class=\"fas fa-spinner spinner\"></i>\n    </p>`;\n  saveClick('Question', id);\n  saveProgress();\n  unSelect('Question');\n  unSelect('Lesson');\n  select('Question', id);\n  document.querySelectorAll('#module-edit-list-question > li[data-id]').forEach(li => li.removeAttribute('disabled'));\n  return await showQuestEditPane((await get('Question', {id, moduleId: getSelId('Module')}))[0]);\n}\n\n/**\n * Appends a new module to module list (left-most list).\n *\n * @param {{id: !Number, authorId: !Number, name: ?String}} module\n */\nfunction appendModule(module = {id: null , name: null}) {\n  const modEl = document.createElement('li');\n  modEl.setAttribute('data-id', module.id);\n  modEl.innerHTML = `\n    <a onclick=\"toggleModule(${module.id})\" style=\"min-width: 100px; padding: 10px; margin-right: 5px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>${module.name ? module.name : 'unnamed #' + module.id.toString()}</span>\n      <button class=\"button is-danger is-small\" style=\"width: 20px; height: 23px;\" onclick=\"if (confirm('Delete module?')) destroyMod(${module.id});\">\n        <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n      </button>\n    </a>`;\n  return document.getElementById('module-edit-list-module').appendChild(modEl);\n}\n\n/**\n * Appends a lesson to the list of lessons AND created a form for editing it.\n *\n * @param {{id: !Number, moduleId: !Number, name: ?String}} lesson\n */\nfunction appendLesson(lesson) {\n  // append to the second (lesson) menu\n  const lessonEl = document.createElement('li');\n  lessonEl.setAttribute('data-module-id', lesson.moduleId);\n  lessonEl.setAttribute('data-id', lesson.id);\n  lessonEl.innerHTML = `\n    <a onclick=\"toggleLesson(${lesson.id})\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>${lesson.name ? lesson.name : 'unnamed #' + lesson.id}</span>\n      <div style=\"display: flex; flex-direction: row; justify-content: space-between;\">\n        <button class=\"button is-small is-danger\" onclick=\"if (confirm('Delete lesson?')) destroyLess(${lesson.id});\" style=\"width: 20px; height: 23px;\">\n          <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n        </button>\n      </div>\n    </a>`;\n  return document.getElementById('module-edit-list-lesson').appendChild(lessonEl);\n}\n\n/**\n * Appends a question to the quiz for the selected module.\n *\n * @param {{id: !Number, moduleId: !Number, name: ?String, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question\n */\nfunction appendQuestion(question) {\n  const questEl = document.createElement('li');\n  questEl.setAttribute('data-id', question.id);\n  questEl.setAttribute('data-module-id', question.moduleId);\n  questEl.innerHTML = `\n    <a class=\"has-text-dark\" onclick=\"toggleQuestion(${question.id})\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n      <span>${question.name ? question.name : 'unnamed #' + question.id}</span>\n      <div style=\"display: flex; flex-direction: row; justify-content: space-between;\">\n        <button class=\"button is-small is-danger\" onclick=\"if (confirm('Delete question?')) destroyQuest(${question.id});\" style=\"width: 20px; height: 23px;\">\n          <i class=\"fas fa-times fa-xs\" style=\"margin: initial;\"></i>\n        </button>\n      </div>\n    </a>\n  `;\n  return document.querySelector(`#module-edit-list-question`).appendChild(questEl);\n}\n\n/**\n * Adds attachment to a list of attachments in a lesson.\n *\n * @param {!{id: ?Number, lessonId: !Number, name: !String}} file\n * @return {void}\n */\nasync function appendAttachment(file) {\n  try {\n    // after sending you don't have the ids (assigned by the DBMS)\n    if (file.id === undefined) {\n      file.id = await get('File', {lessonId: file.lessonId,  name: file.name}).then(fs => fs[0].id);\n    }\n    const list = document.getElementById('module-edit-list-attachments');\n    list.innerHTML += `\n    <li class=\"has-text-black has-background-light\"\n        data-name=\"${file.name}\"\n        data-id=\"${file.id}\"\n        style=\"padding: 10px; margin-bottom: 10px; width: 100%;\">\n      <p style=\"margin-bottom: auto; margin-top: auto; float: left; position: relative; top: 4px;\">${file.name}</p>\n      <div style=\"margin-bottom: auto; margin-top: auto; float: right;\">\n        <a href=\"/file/${file.id}\" class=\"button is-link is-small has-text-white\" download=\"${file.name}\" style=\"\">\n          Download\n          <!--<i class=\"fas fa-download is-block\"></i>-->\n        </a>\n        <a onclick=\"destroyAttach(${file.id}, ${file.lessonId})\" class=\"button is-small is-danger\" style=\"\">\n          Delete\n          <!--<i class=\"fas fa-times is-block\"></i>-->\n        </a>\n      </div>\n    </li>\n      `;\n  } catch (e) {\n    console.error(e);\n    return alert(e.message || e.toString());\n  }\n}\n\nfunction setLessContent() {\n  const lessonId = getSelId('Lesson');\n  document.querySelector(\n    `form #module-edit-lesson-content`).innerHTML = `\n    <p class=\"lesson-edit-msg-has-lesson\">\n      <br>\n      <strong>NOTE</strong>\n      <br>\n      You have already uploaded lesson content!\n      <br>\n      Feel free to <strong>replace</strong> it by re-uploading another file.\n    </p>\n    <br>\n    <a href=\"/api/lesson/${lessonId}/download\"\n       class=\"button is-link is-small has-text-centered has-text-white\"\n       download=\"lesson.html\">\n      <i class=\"fas fa-download icon\"></i>\n      <span>Download</span>\n    </a>\n  `;\n}\n\n/**\n * Remove the HTML content file from a lesson.\n */\nfunction unsetLessContent() {\n  document.querySelector(`form #module-edit-lesson-content`).innerHTML = `\n    <ul style=\"display: flex; flex-direction: column; justify-content: space-around;\">\n      <li>\n        <p><em>Only</em> include the <em>content</em> of the <code>&lt;body&gt;</code> tag</p>\n      </li>\n      <li>\n        <p>We will only accept <strong>HTML</strong> files</p>\n      </li>\n    </ul>\n  `;\n}\n\n/**\n * Modifies a module and updates UI.\n *\n * @return {Promise<void>}\n */\nasync function updateMod() {\n  const pane = document.getElementById('module-edit-pane');\n  const maybeName = pane.querySelector('#module-edit-name').innerText;\n  const maybeTopic = pane.querySelector('#module-edit-topic').innerText;\n  const maybeSummary = pane.querySelector('#module-edit-summary').value;\n  const moduleId = getSelId('Module');\n  try {\n    await update('Module', moduleId, JSON.stringify({\n      summary: maybeSummary ? maybeSummary : null,\n      name: maybeName ? maybeName : null,\n      topic: maybeTopic ? maybeTopic : null,\n    }));\n    sessionStorage.removeItem(`${location.pathname}/modules?authorId=${JSON.parse(sessionStorage.getItem('loggedIn')).id}`);\n    sessionStorage.removeItem(`${location.pathname}/modules?id=${moduleId}`);\n    // await toggleModule(getSelId('Module'));\n  } catch (e) {\n    const msg = e.msg || e.message || e.toString();\n    console.error(e);\n    return alert(msg);\n  }\n  document.querySelector(`#module-edit-list-module li[data-id='${moduleId}'] > a > span`).innerText = maybeName ? maybeName : `unnamed ${moduleId}`;\n  return alert('Updated module.');\n}\n\n/**\n * Modifies a lesson and updates UI.\n *\n * TODO ensure file names are unique.\n *\n * @return {Promise<void>}\n */\nasync function updateLess() {\n  try {\n    const form = document.querySelector('#module-edit-pane form');\n    const id = getSelId('Lesson');\n    const formData = new FormData();\n    const lessonInput  = form.querySelector('input[type=file]:not([multiple])');\n    const hasLessCont = lessonInput.files.length > 0;\n    if (hasLessCont)  {\n      if (!lessonInput.files[0].name.match(/\\.x?html?$/i)) {\n        return alert('Lesson must be an HTML file.');\n      } else formData.append('lesson', lessonInput.files[0], 'lesson.html');\n    }\n    const attachments = form.querySelector('input[type=file][multiple]').files;\n    for (const f of attachments) {\n      if (!f.name.match(/\\.((pn|jp)g|gif|mp[34g])$/i)) {\n        return alert(`Invalid attachment file type ${f.name}.`);\n      } else formData.append(f.name, f);\n    }\n    let maybeName = form.querySelector('input[name=name]').value.trim();\n    formData.append('name', maybeName);\n    formData.append('summary', form.querySelector('textarea[name=summary]')\n      .value\n      .trim());\n    // DO NOT SET CONTENT-TYPE\n    console.debug([...formData.entries()]);\n    await update('Lesson', id, formData, null);\n    if (hasLessCont) setLessContent(id);\n    await Promise.all(Array.from(attachments).map(f => appendAttachment({id: f.id, name: f.name, lessonId: id})));\n    const moduleId = getSelId('Module');\n    sessionStorage.removeItem(`${location.pathname}/lessons?id=${id}&moduleId=${moduleId}`);\n    sessionStorage.removeItem(`${location.pathname}/lessons?id=${id}`);\n    sessionStorage.removeItem(`${location.pathname}/lessons?moduleId=${moduleId}`);\n    sessionStorage.removeItem(`${location.pathname}/files?lessonId=${id}`);\n    maybeName = form.querySelector('input[name=name]').value.trim();\n    // a way to clear files\n    form.querySelector('input[type=file][multiple]').outerHTML = `\n      <input type=\"file\" name=\"attachments\" class=\"is-paddingless\" multiple style=\"display: block\">\n    `;\n    document.querySelector(`#module-edit-list-lesson li[data-id='${id}'] > a > span`).innerText = maybeName ? maybeName : `unnamed ${id}`;\n    return alert('Updated lesson.');\n  } catch (e) {\n    console.error(e);\n    return alert(e.msg || e.message || e.toString());\n  }\n}\n\n/**\n * TODO Modifies a question and updates UI.\n *\n * @return {Promise<void>}\n */\nasync function updateQuest() {\n  const id = getSelId('Question');\n  const moduleId = getSelId('Module');\n  sessionStorage.removeItem(`${location.pathname}/questions?moduleId=${moduleId}`);\n  sessionStorage.removeItem(`${location.pathname}/questions?id=${id}&moduleId=${moduleId}`);\n  const pane = document.getElementById('module-edit-pane');\n  const maybeName = pane.querySelector('#module-edit-question-name').innerText;\n  const maybeA = pane.querySelector('#module-edit-question-answer').innerText;\n  const maybeBadA1 = pane.querySelector('#module-edit-question-bad-answer-1').innerText;\n  const maybeBadA2 = pane.querySelector('#module-edit-question-bad-answer-2').innerText;\n  const maybeBadA3 = pane.querySelector('#module-edit-question-bad-answer-3').innerText;\n  await update('Question', id, JSON.stringify({\n    id,\n    moduleId,\n    name: maybeName ? maybeName : null,\n    badAnswer1: maybeBadA1 ? maybeBadA1 : null,\n    badAnswer2: maybeBadA2 ? maybeBadA2 : null,\n    badAnswer3: maybeBadA3 ? maybeBadA3 : null,\n    correctAnswer: maybeA ? maybeA : null,\n  }));\n  document.querySelector(`#module-edit-list-question li[data-id='${id}'] > a > span`).innerText = maybeName ? maybeName : `unnamed #${id}`;\n  return alert('Updated question.');\n}\n\n/**\n * Destroys a module.\n *\n * @param {!Number} id\n * @return {void}\n */\nfunction destroyMod(id) {\n  destroy('Module', id);\n  sessionStorage.removeItem(`${location.pathname}/modules?authorId=${JSON.parse(sessionStorage.getItem('loggedIn')).id}`);\n  if (getSelId('Module') === id) {\n    clearPane();\n    clearList('Lesson');\n    clearList('Question');\n  }\n  return document.querySelector(`#module-edit-list-module li[data-id='${id}']`).remove();\n}\n\n/**\n * Destroys a lesson.\n *\n * @param {!Number} id\n * @return {Promise<void|!String>}\n */\nfunction destroyLess(id) {\n  const msgProm = destroy('Lesson', id);\n  sessionStorage.removeItem(`${location.pathname}/lessons?moduleId=${getSelId('Module')}`);\n  if (getSelId('Lesson') === id) clearPane();\n  document.querySelector(`#module-edit-list-lesson li[data-id='${id}']`).remove();\n  return msgProm;\n}\n\n/**\n * Destroys a question.\n *\n * @param {!Number} id\n * @return {void}\n */\nfunction destroyQuest(id) {\n  destroy('Question', id);\n  sessionStorage.removeItem(`${location.pathname}/questions?moduleId=${getSelId('Module')}`);\n  if (getSelId('Question') === id) clearPane();\n  return document.querySelector(`#module-edit-list-question li[data-id='${id}']`).remove();\n}\n\n/**\n * Destroys an attachment (file).\n *\n * @param id\n * @param lessonId\n * @return {Promise<void|!String>}\n */\nfunction destroyAttach(id, lessonId) {\n  sessionStorage.removeItem(`${location.pathname}/files?lessonId=${lessonId}`);\n  document.querySelector(`#module-edit-list-attachments li[data-id='${id}']`).remove();\n  // clear cache\n  return destroy('File', id);\n}\n\n/**\n * Creates a module.\n *\n * @return {Promise<void>}\n */\ndocument.getElementById('module-edit-btn-module-create').onclick = async function createMod(e) {\n  e.preventDefault();\n  const authorId = JSON.parse(sessionStorage.getItem('loggedIn')).id;\n  try {\n    const module = create('Module');\n    sessionStorage.removeItem(`${location.pathname}/modules?authorId=${authorId}`);\n    return appendModule(await module);\n  } catch (e) {\n    console.error(e);\n    alert('Your session expired.');\n    location.pathname = '/';\n  }\n};\n\n/**\n * Creates a lesson.\n *\n * @return {Promise<void>}\n */\ndocument.getElementById('module-edit-btn-lesson-create').onclick = async function createLess(e) {\n  e.preventDefault();\n  const moduleId = getSelId('Module');\n  if (!moduleId) return alert('Module must be selected.');\n  try {\n    const lesson = create('Lesson', JSON.stringify({moduleId} ));\n    sessionStorage.removeItem(`${location.pathname}/lessons?moduleId=${moduleId}`);\n    return appendLesson(await lesson);\n  } catch (e) {\n    console.error(e);\n    alert('Your session expired.');\n    location.pathname = '/';\n  }\n};\n\n/**\n * Creates a question.\n *\n * @return {Promise<void>}\n */\ndocument.getElementById('module-edit-btn-question-create').onclick = async function createQuest(e) {\n  e.preventDefault();\n  const moduleId = getSelId('Module');\n  if (!moduleId) return alert('Module must be selected.');\n  try {\n    const question = create('Question', JSON.stringify({moduleId}));\n    sessionStorage.removeItem(`${location.pathname}/questions?moduleId=${moduleId}`);\n    return appendQuestion(await question);\n  } catch (e) {\n    console.error(e);\n    alert('Your session expired.');\n    location.pathname = '/';\n  }\n};\n\n/**\n * Populate the page using AJAX.\n *\n * Try to recall last click.\n */\n(async function() {\n  try {\n\n    document.getElementById('module-edit-spinner-list-module').classList.remove('is-invisible');\n\n    const loggedIn = sessionStorage.getItem('loggedIn');\n\n    if (!loggedIn) return logOut();\n\n    await get('Module', {authorId: JSON.parse(loggedIn).id}).then(ms => Promise.all(ms.map(m => appendModule(m))));\n    document.getElementById('module-edit-spinner-list-module').classList.add('is-invisible');\n\n    return;\n\n    // const memory = sessionStorage.getItem(`${location.pathname}?click`);\n    // if (!memory) return false;\n    // const {page, id} = JSON.parse(memory);\n    //\n    // /**\n    //  * @return {Promise<Boolean>}\n    //  */\n    // async function tryRecallMod() {\n    //   if (page !== 'module') {\n    //     return false;\n    //   } else if (!document.querySelector(`#module-edit-list-module li[data-id='${JSON.parse(memory).id}'] > a`)) {\n    //     return false;\n    //   }\n    //   await toggleModule(JSON.parse(memory).id);\n    //   return true;\n    // }\n    //\n    // /**\n    //  * @return {Promise<Boolean>}\n    //  */\n    // async function tryRecallLess() {\n    //   if (page !== 'lesson') return false;\n    //   const ls = await get('Lesson', {id});\n    //   if (ls.length === 0) return false;\n    //   const {moduleId} = ls[0];\n    //   if (!document.querySelector(`#module-edit-list-module li[data-id='${moduleId}'] > a`)) {\n    //     return false;\n    //   }\n    //   await toggleModule(moduleId);\n    //   if (!document.querySelector(`#module-edit-list-lesson li[data-id='${id}'] > a`)) {\n    //     return false;\n    //   }\n    //   await toggleLesson(id);\n    //   return true;\n    // }\n    //\n    // /**\n    //  * @return {Promise<Boolean>}\n    //  */\n    // async function tryRecallQuest() {\n    //   if (page !== 'question') return false;\n    //   const qs = await get('Question', {id});\n    //   if (qs.length === 0) return false;\n    //   const moduleId = qs[0].moduleId;\n    //   if (!document.querySelector(`#module-edit-list-module li[data-id='${moduleId}'] > a`)) {\n    //     return false;\n    //   }\n    //   await toggleModule(moduleId);\n    //   if (!document.querySelector(`#module-edit-list-question li[data-id='${id}'] > a`)) {\n    //     return false;\n    //   }\n    //   await toggleQuestion(id);\n    //   return true;\n    // }\n    //\n    // return (await tryRecallMod()) || ((await tryRecallLess()) || await tryRecallQuest());\n  } catch(e) {\n    document.getElementById('module-edit-spinner-list-module').classList.add('is-invisible');\n    const msg = e.msg || e.message || e.toString();\n    console.error(e);\n    return alert(msg)\n  }\n})();\n"]}