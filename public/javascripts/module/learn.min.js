"use strict";function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}/**
 * Select (highlight) a list item.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @param {!Number} id
 */function select(a,b){return document.querySelector("#module-edit-list-".concat(a.toLowerCase()," li[data-id='").concat(b,"']")).classList.add("has-background-light")}/**
 * Un-Select (un-highlights) a list item.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 */function unSelect(a){var b=document.querySelector("#module-edit-list-".concat(a.toLowerCase()," li[class*=has-background-light]"));b&&b.classList.remove("has-background-light")}/**
 * Saves the last click. (this is recalled later)
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @param {!Number} id
 */function saveClick(a,b){return sessionStorage.setItem("".concat(location.pathname,"?click"),JSON.stringify({page:a.toLowerCase(),id:b}))}/**
 * Clears a list.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 */function clearList(a){return document.getElementById("module-edit-list-".concat(a.toLowerCase())).innerHTML=""}/**
 * Clears the edit pane.
 */function clearPane(){return document.getElementById("module-edit-pane").innerHTML=""}/**
 * Gets the id of selected.
 *
 * @param {'Module'|'Lesson'|'Question'} what
 * @return {?Number}
 */function getSelId(what){var maybe=document.querySelector("#module-edit-list-".concat(what.toLowerCase()," li[class*=has-background-light]"));return maybe?eval(maybe.getAttribute("data-id")):null}/**
 * Shows the lesson edit pane.
 *
 * @param {!{id: !Number, name: ?String, authorId: !Number, topic: ?String, summary: ?String}} module
 * @param {!Array<!String>} topics
 * @return {Promise<void>}
 */function showModEditPane(){return _showModEditPane.apply(this,arguments)}/**
 * Shows the lesson edit pane.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String, content: ?Boolean, summary: ?String}} lesson
 * @param {Array<{id: ?Number, name: !String}>} attachments
 */function _showModEditPane(){return _showModEditPane=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=1<d.length&&void 0!==d[1]?d[1]:["AI","Anthropology","Archeology","Architecture","Arts","Biology","Chemistry","Computer Science","Design","Drama","Economics","Engineering","Geography","History","Humanities","Languages","Law","Linguistics","Literature","Mathematics","Medicine","Philosophy","Physics","Political Science","Psychology","Sciences","Social Sciences","Sociology","Theology"],a.prev=1,a.t1="\n      <h2 class=\"title\" style=\"margin-bottom: 10px;\">\n        Name\n      </h2>\n      \n      <div id=\"module-edit-name\" style=\"max-width: 300px;\">\n        ".concat(b.name?b.name:"","\n      </div>\n      <h3 class=\"subtitle\" style=\"margin: 25px 0 0 0;\">\n        Topic\n      </h3>\n      <span id=\"module-edit-topic\" style=\"min-width: 150px;\">").concat(b.topic?b.topic:"","</span>\n      \n      <section class=\"content\" style=\"margin-top: 40px;\">\n        <strong>Author</strong>   \n        <a href=\"/user/").concat(b.authorId,"\">\n          "),a.next=5,get("User",{id:b.authorId}).then(function(a){return a[0].email});case 5:return a.t2=a.sent,a.t0=a.t1.concat.call(a.t1,a.t2,"\n        </a>\n        <br>\n        <strong>Rating</strong> <span id=\"module-edit-rating\">"),a.next=9,get("Rating",{moduleId:b.id}).then(function(a){return a.map(function(a){return a.stars})}).then(function(a){var b=a.length;return 0<b?a.reduce(function(a,b){return a+b})/b:0});case 9:a.t3=a.sent,a.t4=b.summary?b.summary:"",document.getElementById("module-edit-pane").innerHTML=a.t0.concat.call(a.t0,a.t3,"/5</span>\n      </section>\n      <section class=\"is-medium\" style=\"margin-bottom: 30px;\">\n        <h2 class=\"title is-medium\" style=\"margin-bottom: 10px;\">Summary</h2>\n        <div id=\"module-edit-summary\"\n                  style=\"min-width: 100%; min-height: 90px; word-wrap: break-word; padding: 10px; border: 1px #c9c3c3 dashed;\">").concat(a.t4,"</div>\n      </section>\n      <div class=\"field is-grouped\">\n        <button type=\"reset\" onclick=\"alert('Implement eroll to module')\" class=\"button is-info\" style=\"margin: 7px\">\n          <i class=\"fas fa-user-plus\"></i>\n          <span>Enrol</span>\n        </button>\n      </div>\n    "),a.next=18;break;case 14:return a.prev=14,a.t5=a["catch"](1),console.error(a.t5),a.abrupt("return",alert(a.t5.msg||a.t5.message||a.t5.toString()));case 18:case"end":return a.stop();}},a,this,[[1,14]])})),_showModEditPane.apply(this,arguments)}function showLessEditPane(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];document.getElementById("module-edit-pane").innerHTML="\n    <form enctype=\"multipart/form-data\"\n          id=\"module-edit-form-lesson\"\n          disabled=\"true\"\n          class=\"lesson-edit-form column is-10-desktop is-full-tablet is-full-mobile\"\n          style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: -15px;\">\n      <h2 class=\"title is-3\">Name</h2>\n      <input name=\"name\" value=\"".concat(a.name?a.name:"","\" \n             autocomplete=\"on\" placeholder=\"e.g. Introduction to AI\"\n             style=\"background: #d3d3d329; padding: 5px; border: 1px #c9c3c3 dashed; min-width: 60%;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Summary</h2>\n      <textarea name=\"summary\" autocomplete=\"on\"\n                style=\"padding: 5px; min-width: 650px; min-height: 50px; max-height: 400px; border: 1px #c9c3c3 dashed;\">").concat(a.summary?a.summary:"","</textarea>\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Content</h2>\n      <p style=\"margin-bottom: 10px;\">Upload HTML file with the lesson content</p>\n      <div id=\"module-edit-lesson-content\"></div>\n      <input type=\"file\" name=\"lesson\" style=\"display: block; max-width: 200px; margin-top: 20px;\">\n      <h2 class=\"title is-3\" style=\"margin-top: 20px;\">Attachments (optional)</h2>\n      <p><strong>Select a file:</strong></p>\n      <br>\n      <ul style=\"list-style-type: disc; display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-left: 19px;\">\n        <li>Image (.jpg, .jpeg, .png, .gif)</li>\n        <li>Audio (.mp3)</li>\n        <li>Video (.mp4, .mpg)</li>\n      </ul>\n      <br>\n      <input type=\"file\" name=\"attachments\" multiple style=\"display: block\">\n      <div style=\"display: flex; flex-direction: column; justify-content: space-around; align-items: flex-start; margin-top: 20px;\">\n        <h3 id=\"lesson-edit-h-uploaded-files title is-5\" style=\"margin-bottom: 8px;\">\n          Uploaded Files\n        </h3>\n        <ul id=\"module-edit-list-attachments\" style=\"display: flex; flex-direction: column; justify-content: flex-start; align-items: flex-start; min-width: 300px;\"></ul>\n      </div>\n      <div style=\"display: flex; flex-direction: row; justify-content: space-between; align-items: center; margin-top: 20px; min-width: 380px; max-width: 500px;\">\n        <button onclick=\"alert('Not Implemented Yet.')\" type=\"reset\" class=\"button is-warning\" style=\"min-width: 100px;\">\n          <i class=\"fas fa-undo\"></i>\n          <span>Reset</span>\n        </button>\n        <button onclick=\"event.preventDefault(); updateLess()\" class=\"button is-success\" style=\"min-width: 100px;\">\n          <i class=\"fas fa-check\"></i>\n          <span>Save</span>\n        </button>\n        <button onclick=\"event.preventDefault(); if (confirm('Delete lesson?')) destroyLess(").concat(a.id,")\" class=\"button is-danger\" style=\"min-width: 100px;\">\n          <i class=\"fas fa-times\"></i>\n          <span>Delete</span>\n        </button>\n      </div>\n    </form>\n    "),a.content?setLessContent():unsetLessContent();var c=!0,d=!1,e=void 0;try{for(var g,h,i=b[Symbol.iterator]();!(c=(g=i.next()).done);c=!0)h=g.value,appendAttachment({id:h.id,lessonId:a.id,name:h.name})}catch(a){d=!0,e=a}finally{try{c||null==i.return||i.return()}finally{if(d)throw e}}}/**
 * Shows the question edit pane.
 *
 * @param {{id: !Number, moduleId: !Number, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question
 */function showQuestEditPane(a){document.getElementById("module-edit-pane").innerHTML="\n    <h1 class=\"title is-3\" style=\"margin-bottom: 10px;\">Question</h1>\n    <p><strong>Note:</strong> Save the current question before editing another one</p>\n    <br>\n    <div class=\"field\">\n      <a id=\"module-edit-question-name\" class=\"button is-medium is-light\" style=\"width: 100%; padding: 5px; border: 1px; margin: auto;\">".concat(a.name?a.name:"","</a>\n    </div>\n    <br>\n\n    <div class=\"field\">\n      <h2 class=\"title is-3\" style=\"margin-bottom: 10px;\">Correct Answer</h2>\n      <a id=\"module-edit-question-answer\" class=\"button is-medium is-light\" style=\"width: 100%; padding: 5px; border: 1px; margin: auto;\">").concat(a.correctAnswer?a.correctAnswer:"","</a>\n    </div>\n    <br>\n    \n    <h3 class=\"title is-3\" style=\"margin-bottom: 10px;\">Other Answers</h3>\n\n    <p><strong>Note:</strong> Include other answers which are wrong</p>\n\n    <br>\n\n    <div class=\"field is-horizontal\">\n      <a id=\"module-edit-question-bad-answer-1\" class=\"button is-medium is-light\" style=\"width: 100%; padding: 5px; border: 1px; margin-right: 10px;\">").concat(a.badAnswer1?a.badAnswer1:"","</a>\n    </div>\n\n    <div class=\"field is-horizontal\">\n      <a id=\"module-edit-question-bad-answer-2\" class=\"button is-medium is-light\" style=\"width: 100%; padding: 5px; border: 1px; margin-right: 10px;\">").concat(a.badAnswer2?a.badAnswer2:"","</a>\n    </div>\n    \n    <div class=\"field is-horizontal\">\n      <a id=\"module-edit-question-bad-answer-3\" class=\"button is-medium is-light\" style=\"width: 100%; padding: 5px; border: 1px; margin-right: 10px;\">").concat(a.badAnswer3?a.badAnswer3:"","</a>\n    </div>\n    <br>\n\n    <div class=\"field is-grouped\">\n      <button type=\"submit\" onclick=\"updateQuest()\" class=\"button is-success\" style=\"margin: 7px\">\n        <i class=\"fas fa-check\"></i>\n        <span>Save</span>\n      </button>\n      <button type=\"reset\" onclick=\"alert('Not Implemented Yet.')\" class=\"button is-warning\" style=\"margin: 7px\">\n        <i class=\"fas fa-undo\"></i>\n        <span>Reset</span>\n      </button>\n      <button onclick=\"if (confirm('Delete question?')) destroyQuest(").concat(a.id,") \" class=\"button is-danger\" style=\"margin: 7px\">\n        <i class=\"fas fa-check\"></i>\n        <span>Delete</span>\n      </button>\n    </div>\n  ")}/**
 * Toggle module. Run when a module is pressed. Shows the module-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function toggleModule(){return _toggleModule.apply(this,arguments)}/**
 * Memorize the changes made to the input (or contenteditable) fields.
 */function _toggleModule(){return _toggleModule=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(saveClick("Module",b),c=getSelId("Module"),c!==b||getSelId("Lesson")||getSelId("Question")){a.next=4;break}return a.abrupt("return");case 4:return unSelect("Lesson"),unSelect("Question"),c!==b&&(unSelect("Module"),select("Module",b),clearList("Lesson"),clearList("Question"),get("Lesson",{moduleId:b}).then(function(a){var b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,appendLesson(f)}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}}),get("Question",{moduleId:b}).then(function(a){var b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,appendQuestion(f)}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}})),a.t0=showModEditPane,a.next=10,get("Module",{id:b}).then(function(a){return a[0]});case 10:return a.t1=a.sent,a.abrupt("return",(0,a.t0)(a.t1));case 12:case"end":return a.stop();}},a,this)})),_toggleModule.apply(this,arguments)}function saveProgress(){var a=document.getElementById("module-edit-pane"),b=getSelId("Module"),c=getSelId("Lesson"),d=getSelId("Question");if(b&&c&&!d);else{if(b&&!c&&d){if(!a.querySelector("#module-edit-question-answer"))return;var e=JSON.stringify([{authorId:JSON.parse(sessionStorage.getItem("loggedIn")).id,badAnswer1:a.querySelector("#module-edit-question-bad-answer-1").innerText.trim(),badAnswer2:a.querySelector("#module-edit-question-bad-answer-2").innerText.trim(),badAnswer3:a.querySelector("#module-edit-question-bad-answer-3").innerText.trim(),correctAnswer:a.querySelector("#module-edit-question-answer").innerText.trim(),name:a.querySelector("#module-edit-question-name").innerText.trim()}]);return sessionStorage.setItem("".concat(location.pathname,"/questions?id=").concat(d),e),sessionStorage.setItem("".concat(location.pathname,"/questions?id=").concat(d,"&moduleId=").concat(b),e)}if(b&&!c&&!d)return a.querySelector("#module-edit-name")?sessionStorage.setItem("".concat(location.pathname,"/modules?id=").concat(b),JSON.stringify([{name:a.querySelector("#module-edit-name").innerText.trim(),topic:a.querySelector("#module-edit-topic").innerText.trim(),authorId:JSON.parse(sessionStorage.getItem("loggedIn")).id,summary:a.querySelector("#module-edit-summary").value.trim()}])):void 0}}/**
 * Toggle module. Run when a module is pressed. Shows the module-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function toggleLesson(){return _toggleLesson.apply(this,arguments)}/**
 * Toggle question. Run when a question is pressed. Shows the question-edit pane.
 *
 * @param {!Number} id
 * @return {Promise<void>}
 */function _toggleLesson(){return _toggleLesson=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=getSelId("Lesson"),b!==c){a.next=3;break}return a.abrupt("return");case 3:return saveClick("Lesson",b),unSelect(null===c?"Question":"Lesson"),select("Lesson",b),a.next=8,get("Lesson",{id:b,moduleId:getSelId("Module")});case 8:return d=a.sent[0],a.t0=showLessEditPane,a.t1=d,a.next=13,get("File",{lessonId:d.id});case 13:return a.t2=a.sent,a.next=16,(0,a.t0)(a.t1,a.t2);case 16:return a.abrupt("return",a.sent);case 17:case"end":return a.stop();}},a,this)})),_toggleLesson.apply(this,arguments)}function toggleQuestion(){return _toggleQuestion.apply(this,arguments)}/**
 * Appends a new module to module list (left-most list).
 *
 * @param {{id: !Number, authorId: !Number, name: ?String}} module
 */function _toggleQuestion(){return _toggleQuestion=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b!==getSelId("Question")){a.next=2;break}return a.abrupt("return");case 2:return saveClick("Question",b),saveProgress(),unSelect("Question"),unSelect("Lesson"),select("Question",b),a.t0=showQuestEditPane,a.next=10,get("Question",{id:b,moduleId:getSelId("Module")});case 10:return a.t1=a.sent[0],a.next=13,(0,a.t0)(a.t1);case 13:return a.abrupt("return",a.sent);case 14:case"end":return a.stop();}},a,this)})),_toggleQuestion.apply(this,arguments)}function appendModule(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{id:null,name:null};document.getElementById("module-edit-list-module").innerHTML+="\n    <li data-id=\"".concat(a.id,"\">\n      <a onclick=\"toggleModule(").concat(a.id,")\" style=\"min-width: 100px; padding: 10px; margin-right: 5px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n        <span>").concat(a.name?a.name:"unnamed #"+a.id.toString(),"</span>\n      </a>\n    </li>\n    ")}/**
 * Appends a lesson to the list of lessons AND created a form for editing it.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String}} lesson
 */function appendLesson(a){// append to the second (lesson) menu
document.getElementById("module-edit-list-lesson").innerHTML+="\n    <li data-id=\"".concat(a.id,"\"\n        data-module-id=\"").concat(a.moduleId,"\">\n      <a onclick=\"toggleLesson(").concat(a.id,")\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n        <span>").concat(a.name?a.name:"unnamed #"+a.id,"</span>\n      </a>\n    </li>\n    ")}/**
 * Appends a question to the quiz for the selected module.
 *
 * @param {{id: !Number, moduleId: !Number, name: ?String, correctAnswer: ?String, badAnswer1: ?String, badAnswer2: ?String, badAnswer3: ?String}} question
 */function appendQuestion(a){document.querySelector("#module-edit-list-question").innerHTML+="\n    <li data-id=\"".concat(a.id,"\"\n        data-module-id=\"").concat(a.moduleId,"\">\n      <a class=\"has-text-dark\" onclick=\"toggleQuestion(").concat(a.id,")\" style=\"padding: 5px 10px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;\">\n        <span>").concat(a.name?a.name:"unnamed #"+a.id,"</span>\n      </a>\n    </li>\n  ")}/**
 * Adds attachment to a list of attachments in a lesson.
 *
 * @param {!{id: ?Number, lessonId: !Number, name: !String}} file
 * @return {void}
 */function appendAttachment(){return _appendAttachment.apply(this,arguments)}function _appendAttachment(){return _appendAttachment=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,void 0!==b.id){a.next=5;break}return a.next=4,get("File",{lessonId:b.lessonId,name:b.name}).then(function(a){return a[0].id});case 4:b.id=a.sent;case 5:c=document.getElementById("module-edit-list-attachments"),c.innerHTML+="\n    <li class=\"has-text-black\"\n        data-name=\"".concat(b.name,"\"\n        data-id=\"").concat(b.id,"\"\n        style=\"background: #e5e5e5d4; padding: 8px 12px; display: flex; flex-direction: row; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\n      <div style=\"margin-right: 10px;\">").concat(b.name,"</div>\n      <a href=\"/file/").concat(b.id,"\" class=\"button is-link is-small\" download=\"").concat(b.name,"\" style=\"margin-right: 10px; float: left;\"><i class=\"fas fa-download\" style=\"margin-left: 10px;\"></i></a>\n      <a onclick=\"destroyAttach(").concat(b.id,", ").concat(b.lessonId,")\" class=\"button is-small is-danger\"><i class=\"fas fa-times\" style=\"margin: 0; float: left;\"></i></a>\n    </li>\n      "),a.next=13;break;case 9:return a.prev=9,a.t0=a["catch"](0),console.error(a.t0),a.abrupt("return",alert(a.t0.message||a.t0.toString()));case 13:case"end":return a.stop();}},a,this,[[0,9]])})),_appendAttachment.apply(this,arguments)}function setLessContent(){var a=getSelId("Lesson");document.querySelector("form #module-edit-lesson-content").innerHTML="\n    <p class=\"lesson-edit-msg-has-lesson\">\n      <br>\n      <strong>NOTE</strong>\n      <br>\n      You have already uploaded lesson content!\n      <br>\n      Feel free to <strong>replace</strong> it by re-uploading another file.\n    </p>\n    <br>\n    <a href=\"/api/lesson/".concat(a,"/download\"\n       class=\"button is-link is-small has-text-centered\"\n       download=\"lesson.html\">\n      <i class=\"fas fa-download icon\"></i>\n      <span>Download</span>\n    </a>\n    <!--<button class=\"button is-danger is-small\" onclick=\"destroyLess(").concat(a,").then(() => unsetLessContent())\">\n      <i class=\"fas fa-times icon\"></i>\n      <span>Delete</span>\n    </button>\n    -->\n  ")}/**
 * Remove the HTML content file from a lesson.
 */function unsetLessContent(){document.querySelector("form #module-edit-lesson-content").innerHTML="\n    <ul style=\"display: flex; flex-direction: column; justify-content: space-around;\">\n      <li>\n        <p><em>Only</em> include the <em>content</em> of the <code>&lt;body&gt;</code> tag</p>\n      </li>\n      <li>\n        <p>We will only accept <strong>HTML</strong> files</p>\n      </li>\n    </ul>\n  "}//Populate the page using AJAX
/**
 * Try to recall last click.
 */_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c,d,e,f,g,h,i,j,k;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,b=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("module"===i){a.next=4;break}return a.abrupt("return",!1);case 4:if(document.querySelector("#module-edit-list-module li[data-id='".concat(JSON.parse(g).id,"'] > a"))){a.next=6;break}return a.abrupt("return",!1);case 6:return a.next=8,toggleModule(JSON.parse(g).id);case 8:return a.abrupt("return",!0);case 9:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),c=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("lesson"===i){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,get("Lesson",{id:j});case 4:if(b=a.sent,0!==b.length){a.next=7;break}return a.abrupt("return",!1);case 7:if(c=b[0].moduleId,document.querySelector("#module-edit-list-module li[data-id='".concat(c,"'] > a"))){a.next=10;break}return a.abrupt("return",!1);case 10:return a.next=12,toggleModule(c);case 12:if(document.querySelector("#module-edit-list-lesson li[data-id='".concat(j,"'] > a"))){a.next=14;break}return a.abrupt("return",!1);case 14:return a.next=16,toggleLesson(j);case 16:return a.abrupt("return",!0);case 17:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),d=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("question"===i){a.next=2;break}return a.abrupt("return",!1);case 2:return a.next=4,get("Question",{id:j});case 4:if(b=a.sent,0!==b.length){a.next=7;break}return a.abrupt("return",!1);case 7:if(c=b[0].moduleId,document.querySelector("#module-edit-list-module li[data-id='".concat(c,"'] > a"))){a.next=10;break}return a.abrupt("return",!1);case 10:return a.next=12,toggleModule(c);case 12:if(document.querySelector("#module-edit-list-question li[data-id='".concat(j,"'] > a"))){a.next=14;break}return a.abrupt("return",!1);case 14:return a.next=16,toggleQuestion(j);case 16:return a.abrupt("return",!0);case 17:case"end":return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),e={redirect:"follow",cache:"no-cache",mode:"cors",credentials:"include",headers:{Accept:"application/json"}},f=JSON.parse(sessionStorage.getItem("loggedIn")).id,fetch("/api/enrollment/search?userId=".concat(f),e).then(function(a){return 400<=a.status// if it goes wrong force it to jump to reject
?a.json().then(function(a){return Promise.reject(a)})// the JSON object is guaranteed to have a "msg" property
:a.json()}).then(function(a){var b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,appendModule(f)}catch(a){c=!0,d=a}finally{try{b||null==g.return||g.return()}finally{if(c)throw d}}}),g=sessionStorage.getItem("".concat(location.pathname,"?click")),g){a.next=10;break}return a.abrupt("return",!1);case 10:return h=JSON.parse(g),i=h.page,j=h.id,a.next=13,b();case 13:if(a.t0=a.sent,a.t0){a.next=23;break}return a.next=17,c();case 17:if(a.t1=a.sent,a.t1){a.next=22;break}return a.next=21,d();case 21:a.t1=a.sent;case 22:a.t0=a.t1;case 23:return a.abrupt("return",a.t0);case 26:return a.prev=26,a.t2=a["catch"](0),k=a.t2.msg||a.t2.message||a.t2.toString(),console.error(a.t2),a.abrupt("return",alert(k));case 31:case"end":return a.stop();}},a,this,[[0,26]])}))();